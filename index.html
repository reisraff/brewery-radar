<!DOCTYPE html>
<html lang="pt-BR">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M8N7ECWKVX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M8N7ECWKVX');
</script>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Radar de Cervejaria ‚Äì Visualiza√ß√£o & Compara√ß√£o</title>
<!-- Chart.js via CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
<style>
  :root{
    --bg:#0b1020;
    --card:#131a33;
    --muted:#a8b3cf;
    --text:#e8ecf8;
    --brand-left:#4c8df6;   /* azul (Esquerda) */
    --brand-right:#e65bb7;  /* magenta (Direita) */
    --ring:#2a335a;
  }
  *{box-sizing:border-box}
  body{
    margin:0; padding:24px;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
    color:var(--text); background: radial-gradient(1200px 700px at 20% -10%, #1c2550 0%, var(--bg) 35%), var(--bg);
  }
  h1{font-size:clamp(20px,3vw,28px); margin:0 0 8px 0; letter-spacing:.2px}
  .sub{color:var(--muted); margin-bottom:22px}
  .container{
    display:grid; gap:18px;
    grid-template-columns: 460px 1fr 460px;
  }
  #color-tool .container{
    grid-template-columns: 644px 1fr 644px;
  }
  @media (max-width: 1200px){
    .container{grid-template-columns: 400px 1fr 400px; gap:12px}
    #color-tool .container{grid-template-columns: 560px 1fr 560px; gap:12px}
  }
  @media (max-width: 980px){
    .container{
      grid-template-columns: 1fr;
      grid-template-rows: auto auto auto;
    }
    .left-panel { order: 1; }
    .chart-panel { order: 3; }
    .right-panel { order: 2; }
  }
  .panel{
    background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border:1px solid #1f2647;
    border-radius:16px;
    padding:16px;
    box-shadow: 0 10px 30px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.05);
  }
  .panel h2{margin:2px 0 12px 0; font-size:16px; color:#ced7ff; font-weight:700}
  .row{display:flex; gap:10px; margin-bottom:10px}
  label{font-size:12px; color:var(--muted); display:block; margin-bottom:6px}
  select, input[type="text"]{
    width:100%;
    background:#0f1530; color:var(--text);
    border:1px solid #27305a; border-radius:10px;
    padding:10px 12px; outline:none;
    font-size:14px; transition:border .2s, box-shadow .2s;
  }
  select:focus, input[type="text"]:focus{
    border-color:#5a6ee5; box-shadow:0 0 0 3px rgba(90,110,229,.25)
  }
  .grid-2{display:grid; grid-template-columns:1fr 1fr; gap:10px}
  .pill{
    display:inline-flex; align-items:center; gap:8px;
    padding:8px 10px; border-radius:999px; font-weight:600; font-size:12px; letter-spacing:.2px
  }
  .left-pill{background:rgba(76,141,246,.12); color:#cfe1ff; border:1px solid rgba(76,141,246,.35)}
  .right-pill{background:rgba(230,91,183,.12); color:#ffd1ef; border:1px solid rgba(230,91,183,.35)}
  .meta{
    display:grid; gap:8px; margin-top:6px
  }
  .meta .item{
    background:#0f1530; border:1px solid #27305a; border-radius:10px; padding:10px 12px;
  }
  .meta .item b{color:#cfd7ff; font-size:12px}
  .styles{display:flex; flex-wrap:wrap; gap:6px; margin-top:6px}
  .tag{
    background:#0a112b; color:#d7def9; border:1px solid #243062;
    font-size:12px; padding:6px 8px; border-radius:999px
  }
  .header{
    display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px
  }
  .legend{
    display:flex; gap:8px; align-items:center; flex-wrap:wrap
  }
  .legend .key{
    display:inline-flex; align-items:center; gap:6px; font-size:12px; color:var(--muted)
  }
  .dot{
    width:10px; height:10px; border-radius:50%
  }
  .hint{color:var(--muted); font-size:12px; margin-top:10px}
  canvas{width:100% !important; height:auto !important; max-height:63vh}
  #chemicalChart, #compoundsChart{max-height:31.5vh !important}
  .chart-container{position:relative; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif}
  .footnote{margin-top:10px; font-size:12px; color:#9fb0ff}
  .search{margin-bottom:10px}
  .tabs{
    display:flex; gap:2px; margin-bottom:18px;
    background:rgba(255,255,255,.04); border:1px solid #1f2647;
    border-radius:8px; padding:4px;
  }
  .tab-btn{
    background:transparent; border:none; color:var(--muted);
    padding:8px 16px; border-radius:6px; cursor:pointer;
    font-size:14px; font-weight:600;
    transition:all .2s;
  }
  .tab-btn:hover{background:rgba(255,255,255,.08); color:var(--text)}
  .tab-btn.active{background:var(--brand-left); color:#fff}
  .tab-content{display:none}
  .tab-content.active{display:block}
  .lang-selector{
    position:absolute; top:24px; right:24px;
    background:rgba(255,255,255,.04); border:1px solid #1f2647;
    border-radius:8px; padding:4px;
    display:flex; gap:2px;
  }
  .lang-btn{
    background:transparent; border:none; color:var(--muted);
    padding:6px 8px; border-radius:6px; cursor:pointer;
    font-size:11px; font-weight:600; text-transform:uppercase;
    transition:all .2s;
  }
  .lang-btn:hover{background:rgba(255,255,255,.08); color:var(--text)}
  .lang-btn.active{background:var(--brand-left); color:#fff}
  .flag{
    width:16px; height:12px; border-radius:2px; display:inline-block;
    margin-left:6px; vertical-align:middle; border:1px solid rgba(255,255,255,.15);
    background-size:cover; background-position:center;
  }
  .main-menu{
    display:flex; gap:2px; margin-bottom:18px;
    background:rgba(255,255,255,.04); border:1px solid #1f2647;
    border-radius:8px; padding:4px;
  }
  .menu-btn{
    background:transparent; border:none; color:var(--muted);
    padding:12px 24px; border-radius:6px; cursor:pointer;
    font-size:16px; font-weight:700;
    transition:all .2s;
  }
  .menu-btn:hover{background:rgba(255,255,255,.08); color:var(--text)}
  .menu-btn.active{background:var(--brand-left); color:#fff}
  .tool-title{margin-bottom:18px}
  .tool-title h2{margin:0 0 8px 0; font-size:20px; color:var(--text)}
  .tool-section{display:none}
  .tool-section.active{display:block}
  .converter-controls{margin-top:16px}
  .converter-results{margin-top:20px; display:grid; gap:12px}
  .result-item{
    background:#0f1530; border:1px solid #27305a; border-radius:10px; padding:12px;
    display:flex; justify-content:space-between; align-items:center;
  }
  .result-item b{color:#cfd7ff; font-size:14px}
  .result-item span{color:var(--text); font-size:16px; font-weight:600}
  .color-display{margin-top:16px}
  .color-samples{display:grid; grid-template-columns:repeat(3, 1fr); gap:12px}
  .color-sample{text-align:center}
  .color-box{
    width:100%; height:60px; border-radius:8px; margin-bottom:8px;
    border:1px solid #27305a; background:#0f1530;
    transition:all 0.3s ease;
  }
  .color-sample span{font-size:12px; color:var(--muted)}
  .color-ruler-container{
    position:relative; margin-top:24px; 
    width:calc(100% + 32px); margin-left:-16px; height:60px;
  }
  .color-ruler{
    width:100%; height:40px; position:relative; 
    border:1px solid #27305a; border-radius:4px; overflow:hidden;
    box-shadow: 0 4px 8px rgba(0,0,0,.15);
  }
  .color-ruler-indicator{
    position:absolute; top:0; width:2px; height:40px; 
    background:#fff; border:1px solid #000; z-index:10;
    opacity:0; transition:all 0.3s ease; pointer-events:none;
    box-shadow:0 0 4px rgba(255,255,255,0.8);
  }
  .color-ruler-labels{
    display:flex; justify-content:space-between; margin-top:4px; 
    font-size:11px; color:var(--muted); padding:0 8px;
  }
  .converter-main-content{display:flex; gap:24px; align-items:flex-start}
  .converter-left{flex:1}
  .converter-right{flex-shrink:0}
  .beer-glass-container{
    display:flex; justify-content:center; align-items:center;
    background:rgba(255,255,255,0.02); border:1px solid #27305a;
    border-radius:12px; padding:16px; min-height:160px;
  }
  .beer-glass{filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.3))}
  input[type="range"]{
    width:100%; margin:8px 0; appearance:none; height:4px;
    background:#27305a; border-radius:2px; outline:none;
  }
  input[type="range"]::-webkit-slider-thumb{
    appearance:none; width:16px; height:16px; border-radius:50%;
    background:var(--brand-left); cursor:pointer;
  }
  input[type="range"]::-moz-range-thumb{
    width:16px; height:16px; border-radius:50%;
    background:var(--brand-left); cursor:pointer; border:none;
  }
  #transparencyValue{
    font-size:12px; color:var(--muted); margin-left:8px;
  }
</style>
</head>
<body>
  <div class="lang-selector">
    <button class="lang-btn active" data-lang="pt">PT</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="es">ES</button>
  </div>
  
  <h1 data-i18n="main_title">Brewery Radar ‚Äì Visualization & Comparison</h1>
  
  <!-- Menu principal -->
  <div class="main-menu">
    <button class="menu-btn active" data-tool="hop" data-i18n="menu_hop_radar">Hop Radar</button>
    <button class="menu-btn" data-tool="yeast" data-i18n="menu_yeast_radar">Yeast Radar</button>
    <button class="menu-btn" data-tool="converter" data-i18n="menu_converter">Conversor</button>
    <button class="menu-btn" data-tool="abv" data-i18n="menu_abv" style="display: none;">Calculadora ABV</button>
    <button class="menu-btn" data-tool="color" data-i18n="menu_color">Conversor de Cor</button>
  </div>
  
  <div class="tool-title">
    <div class="sub" style="color: #f59e0b; margin-top: 8px;" data-i18n="warning">‚ö†Ô∏è se algum item n√£o estiver incluido na lista ou estiver incorreto, envie um email para reisraff@gmail.com</div>
  </div>

  <!-- Hop Radar Tool -->
  <div class="tool-section active" id="hop-tool">
    <div class="container">
      <!-- Painel esquerdo -->
      <div class="panel left-panel">
      <h2 data-i18n="left_label">Lado Esquerdo (Azul)</h2>

      <div class="search">
        <label for="q" data-i18n="filter_label">Filtro r√°pido (por nome, pa√≠s ou estilo)</label>
        <input id="q" type="text" data-i18n-placeholder="filter_placeholder" placeholder="Ex.: IPA, Alemanha, Citra..." />
      </div>

      <div>
        <label for="leftSel" data-i18n="left_selector_label">Selecionar L√∫pulo</label>
        <select id="leftSel"></select>
      </div>

      <div class="meta">
        <div class="item">
          <span class="pill left-pill" id="leftPill">ESQUERDA</span>
          <div id="leftMeta"></div>
        </div>
      </div>

      <div class="hint" data-i18n="hint">Dica: use o filtro para reduzir a lista por pa√≠s (ex.: <i>US</i>, <i>DE</i>, <i>GB</i>) ou por um estilo (ex.: <i>NEIPA</i>, <i>K√∂lsch</i>).</div>
    </div>

    <!-- Painel do gr√°fico -->
    <div class="panel chart-panel">
      <!-- Abas -->
      <div class="tabs">
        <button class="tab-btn active" data-tab="aroma" data-i18n="tab_aroma">Perfil Arom√°tico</button>
        <button class="tab-btn" data-tab="chemical" data-i18n="tab_chemical">Composi√ß√£o Qu√≠mica</button>
      </div>

      <!-- Conte√∫do da aba Aroma -->
      <div class="tab-content active" id="aroma-content">
        <div class="header">
          <h2 style="margin:0" data-i18n="chart_title">Gr√°fico em Teia</h2>
          <div class="legend">
            <span class="key"><span class="dot" style="background:var(--brand-left)"></span> <span id="leftLegend">Esquerda</span></span>
            <span class="key"><span class="dot" style="background:var(--brand-right)"></span> <span id="rightLegend">Direita</span></span>
            <span class="key" data-i18n="legend_scale">Escala 0‚Äì10</span>
          </div>
        </div>
        <canvas id="radar"></canvas>
        <div class="footnote" data-i18n="footnote">As pontas representam as caracter√≠sticas: Ch√°, C√≠trico, Verde, Caramelado, Amadeirado, Picante, Mentolado, Herbal, Vegetal, Floral, Fruta Verde, Fruta Vermelha, Fruta Amarela, Fruta Doce.</div>
      </div>

      <!-- Conte√∫do da aba Qu√≠mica -->
      <div class="tab-content" id="chemical-content">
        <div class="header">
          <h2 style="margin:0" data-i18n="chemical_title">Composi√ß√£o Qu√≠mica</h2>
          <div class="legend">
            <span class="key"><span class="dot" style="background:var(--brand-left)"></span> <span id="leftLegendChem">Esquerda</span></span>
            <span class="key"><span class="dot" style="background:var(--brand-right)"></span> <span id="rightLegendChem">Direita</span></span>
            <span class="key" data-i18n="legend_percent">% / ml/100g</span>
          </div>
        </div>
        <canvas id="chemicalChart"></canvas>
        <div class="footnote" data-i18n="chemical_footnote">Compara√ß√£o dos n√≠veis de √°cidos alfa, √°cidos beta e √≥leos essenciais totais.</div>
        
        <!-- Segundo gr√°fico qu√≠mico - Compostos -->
        <div class="header" style="margin-top: 24px;">
          <h2 style="margin:0" data-i18n="compounds_title">Compostos Arom√°ticos</h2>
          <div class="legend">
            <span class="key"><span class="dot" style="background:var(--brand-left)"></span> <span id="leftLegendCompounds">Esquerda</span></span>
            <span class="key"><span class="dot" style="background:var(--brand-right)"></span> <span id="rightLegendCompounds">Direita</span></span>
            <span class="key" data-i18n="legend_percent">% / ml/100g</span>
          </div>
        </div>
        <canvas id="compoundsChart"></canvas>
        <div class="footnote" data-i18n="compounds_footnote">Compara√ß√£o dos compostos arom√°ticos: Mirceno, Humuleno, Cariofileno, Farneseno, Linalol, Geraniol e Polifen√≥is.</div>
      </div>
    </div>

    <!-- Painel direito -->
    <div class="panel right-panel">
      <h2 data-i18n="right_label">Lado Direito (Magenta)</h2>

      <div class="search">
        <label for="q2" data-i18n="filter_label">Filtro r√°pido (por nome, pa√≠s ou estilo)</label>
        <input id="q2" type="text" data-i18n-placeholder="filter_placeholder" placeholder="Ex.: IPA, Alemanha, Citra..." />
      </div>

      <div>
        <label for="rightSel" data-i18n="right_selector_label">Selecionar L√∫pulo</label>
        <select id="rightSel"></select>
      </div>

      <div class="meta">
        <div class="item">
          <span class="pill right-pill" id="rightPill">DIREITA</span>
          <div id="rightMeta"></div>
        </div>
      </div>

      <div class="hint" data-i18n="hint_right">Opcional: selecione um segundo l√∫pulo para compara√ß√£o.</div>
    </div>
    </div>
  </div>

  <!-- Yeast Radar Tool -->
  <div class="tool-section" id="yeast-tool">
    <div class="container">
      <!-- Painel esquerdo -->
      <div class="panel left-panel">
        <h2 data-i18n="left_label_yeast">Lado Esquerdo (Azul)</h2>

        <div class="search">
          <label for="qYeast" data-i18n="filter_label_yeast">Filtro r√°pido (por nome, pa√≠s ou tipo)</label>
          <input id="qYeast" type="text" data-i18n-placeholder="filter_placeholder_yeast" placeholder="Ex.: Ale, Lager, US-05..." />
        </div>

        <div>
          <label for="leftSelYeast" data-i18n="left_selector_label_yeast">Selecionar Levedura</label>
          <select id="leftSelYeast"></select>
        </div>

        <div class="meta">
          <div class="item">
            <span class="pill left-pill" id="leftPillYeast">ESQUERDA</span>
            <div id="leftMetaYeast"></div>
          </div>
        </div>

        <div class="hint" data-i18n="hint_yeast">Dica: use o filtro para reduzir a lista por pa√≠s (ex.: <i>US</i>, <i>DE</i>, <i>GB</i>) ou por um tipo (ex.: <i>Ale</i>, <i>Lager</i>).</div>
      </div>

      <!-- Painel do gr√°fico -->
      <div class="panel chart-panel">
        <!-- Abas -->
        <div class="tabs">
          <button class="tab-btn active" data-tab="yeast-aroma" data-i18n="tab_yeast_aroma">Perfil de Fermenta√ß√£o</button>
          <button class="tab-btn" data-tab="yeast-specs" data-i18n="tab_yeast_specs">Especifica√ß√µes</button>
        </div>

        <!-- Conte√∫do da aba Perfil de Fermenta√ß√£o -->
        <div class="tab-content active" id="yeast-aroma-content">
          <div class="header">
            <h2 style="margin:0" data-i18n="yeast_chart_title">Gr√°fico em Teia</h2>
            <div class="legend">
              <span class="key"><span class="dot" style="background:var(--brand-left)"></span> <span id="leftLegendYeast">Esquerda</span></span>
              <span class="key"><span class="dot" style="background:var(--brand-right)"></span> <span id="rightLegendYeast">Direita</span></span>
              <span class="key" data-i18n="legend_scale">Escala 0‚Äì10</span>
            </div>
          </div>
          <canvas id="yeastRadar"></canvas>
          <div class="footnote" data-i18n="yeast_footnote">As pontas representam as caracter√≠sticas: Frutal, Floral, Picante, Fenol, Ester, Limpo, Cremoso, Mineral, Alco√≥lico, Acidez, Complexo, Selva, Terroso, Doce.</div>
        </div>

        <!-- Conte√∫do da aba Especifica√ß√µes -->
        <div class="tab-content" id="yeast-specs-content">
          <div class="header">
            <h2 style="margin:0" data-i18n="yeast_specs_title">Especifica√ß√µes</h2>
            <div class="legend">
              <span class="key"><span class="dot" style="background:var(--brand-left)"></span> <span id="leftLegendYeastSpecs">Esquerda</span></span>
              <span class="key"><span class="dot" style="background:var(--brand-right)"></span> <span id="rightLegendYeastSpecs">Direita</span></span>
            </div>
          </div>
          <canvas id="yeastSpecsChart"></canvas>
          <div class="footnote" data-i18n="yeast_specs_footnote">Compara√ß√£o de toler√¢ncia ao √°lcool e faixa de temperatura ideal.</div>
        </div>
      </div>

      <!-- Painel direito -->
      <div class="panel right-panel">
        <h2 data-i18n="right_label_yeast">Lado Direito (Magenta)</h2>

        <div class="search">
          <label for="q2Yeast" data-i18n="filter_label_yeast">Filtro r√°pido (por nome, pa√≠s ou tipo)</label>
          <input id="q2Yeast" type="text" data-i18n-placeholder="filter_placeholder_yeast" placeholder="Ex.: Ale, Lager, US-05..." />
        </div>

        <div>
          <label for="rightSelYeast" data-i18n="right_selector_label_yeast">Selecionar Levedura</label>
          <select id="rightSelYeast"></select>
        </div>

        <div class="meta">
          <div class="item">
            <span class="pill right-pill" id="rightPillYeast">DIREITA</span>
            <div id="rightMetaYeast"></div>
          </div>
        </div>

        <div class="hint" data-i18n="hint_right_yeast">Opcional: selecione uma segunda levedura para compara√ß√£o.</div>
      </div>
    </div>
  </div>

  <!-- Converter Tool -->
  <div class="tool-section" id="converter-tool">
    <div class="container">
      <div class="panel">
        <h2 data-i18n="converter_title">Conversor de Densidade</h2>
        <div class="converter-controls">
          <div class="row">
            <div>
              <label for="inputType" data-i18n="input_type_label">Tipo de entrada:</label>
              <select id="inputType">
                <option value="plato" data-i18n="plato_option">Plato/BRIX</option>
                <option value="gravity" data-i18n="gravity_option">Gravity</option>
              </select>
            </div>
          </div>
          <div class="row">
            <div>
              <label for="inputValue" data-i18n="input_value_label">Valor:</label>
              <input type="text" id="inputValue" placeholder="0.0000" />
            </div>
          </div>
          <div class="converter-results">
            <div class="result-item">
              <b data-i18n="plato_result">Plato/BRIX:</b>
              <span id="platoResult">‚Äî</span>
            </div>
            <div class="result-item">
              <b data-i18n="gravity_result">Gravity:</b>
              <span id="gravityResult">‚Äî</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ABV Calculator Tool -->
  <div class="tool-section" id="abv-tool">
    <div class="container">
      <div class="panel">
        <h2 data-i18n="abv_title">Calculadora de ABV</h2>
        <div class="converter-controls">
          <div class="row">
            <div>
              <label for="ogType" data-i18n="og_type_label">Gravidade Original (OG):</label>
              <select id="ogType">
                <option value="gravity" data-i18n="gravity_option">Gravity</option>
                <option value="plato" data-i18n="plato_option">Plato/BRIX</option>
              </select>
            </div>
            <div>
              <label for="ogValue" data-i18n="og_value_label">Valor OG:</label>
              <input type="text" id="ogValue" placeholder="1.050" />
            </div>
          </div>
          <div class="row">
            <div>
              <label for="fgMethod" data-i18n="fg_method_label">M√©todo de Medi√ß√£o FG:</label>
              <select id="fgMethod">
                <option value="hydrometer" data-i18n="hydrometer_option">Dens√≠metro</option>
                <option value="refractometer" data-i18n="refractometer_option">Refrat√¥metro</option>
              </select>
            </div>
          </div>
          <div class="row">
            <div>
              <label for="fgType" data-i18n="fg_type_label">Gravidade Final (FG):</label>
              <select id="fgType">
                <option value="gravity" data-i18n="gravity_option">Gravity</option>
                <option value="plato" data-i18n="plato_option">Plato/BRIX</option>
              </select>
            </div>
            <div>
              <label for="fgValue" data-i18n="fg_value_label">Valor FG:</label>
              <input type="text" id="fgValue" placeholder="1.010" />
            </div>
          </div>
          <div class="row">
            <div>
              <label for="correctionFactor" data-i18n="correction_factor_label">Fator de Corre√ß√£o:</label>
              <input type="text" id="correctionFactor" value="1.04" placeholder="1.04" />
            </div>
          </div>
          <div class="converter-results">
            <div class="result-item">
              <b data-i18n="density_gravity_result">Gravity:</b>
              <span id="densityGravityResult">‚Äî</span>
            </div>
            <div class="result-item">
              <b data-i18n="density_plato_result">Plato/BRIX:</b>
              <span id="densityPlatoResult">‚Äî</span>
            </div>
            <div class="result-item">
              <b data-i18n="abv_result">ABV:</b>
              <span id="abvResult">‚Äî</span>
            </div>
            <div class="result-item">
              <b data-i18n="abw_result">ABW:</b>
              <span id="abwResult">‚Äî</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Color Converter Tool -->
  <div class="tool-section" id="color-tool">
    <div class="container">
      <div class="panel">
        <h2 data-i18n="color_title">Conversor de Cor de Cerveja</h2>
        <div class="converter-controls">
          <div class="converter-main-content">
            <div class="converter-left">
              <div class="row">
                <div>
                  <label for="colorInputType" data-i18n="color_input_type_label">Tipo de entrada:</label>
                  <select id="colorInputType">
                    <option value="lovibond" data-i18n="lovibond_option">Lovibond</option>
                    <option value="srm" data-i18n="srm_option">SRM</option>
                    <option value="ebc" data-i18n="ebc_option">EBC</option>
                  </select>
                </div>
                <div>
                  <label for="colorInputValue" data-i18n="color_input_value_label">Valor:</label>
                  <input type="text" id="colorInputValue" placeholder="0" />
                </div>
              </div>
              <div class="row">
                <div>
                  <label for="beerTransparency" data-i18n="beer_transparency_label">Transpar√™ncia da cerveja:</label>
                  <input type="range" id="beerTransparency" min="0" max="100" step="5" value="80" />
                  <span id="transparencyValue">80%</span>
                </div>
              </div>
            </div>
            <div class="converter-right">
              <div class="beer-glass-container">
                <svg class="beer-glass" viewBox="0 0 100 120" width="120" height="144">
                  <defs>
                    <!-- Pattern for transparency background -->
                    <pattern id="transparencyPattern" x="0" y="0" width="8" height="8" patternUnits="userSpaceOnUse">
                      <rect x="0" y="0" width="4" height="4" fill="#e0e0e0"/>
                      <rect x="4" y="4" width="4" height="4" fill="#e0e0e0"/>
                      <rect x="4" y="0" width="4" height="4" fill="#f5f5f5"/>
                      <rect x="0" y="4" width="4" height="4" fill="#f5f5f5"/>
                    </pattern>
                    <!-- Clip path for glass shape -->
                    <clipPath id="glassClip">
                      <path d="M27 102 L27 27 Q27 22 32 22 L68 22 Q73 22 73 27 L73 102 Q73 107 68 107 L32 107 Q27 107 27 102 Z"/>
                    </clipPath>
                  </defs>
                  
                  <!-- Background pattern (visible through transparent beer) -->
                  <rect x="27" y="22" width="46" height="85" fill="url(#transparencyPattern)" clip-path="url(#glassClip)"/>
                  
                  <!-- Beer liquid -->
                  <path id="beerLiquid" d="M27 102 L27 27 Q27 22 32 22 L68 22 Q73 22 73 27 L73 102 Q73 107 68 107 L32 107 Q27 107 27 102 Z" 
                        fill="#F3F993" opacity="0.8"/>
                  
                  <!-- Glass outline -->
                  <path d="M25 100 L25 25 Q25 20 30 20 L70 20 Q75 20 75 25 L75 100 Q75 105 70 105 L30 105 Q25 105 25 100 Z" 
                        fill="none" stroke="#ddd" stroke-width="2" opacity="0.8"/>
                  
                  <!-- Foam/head -->
                  <ellipse cx="50" cy="25" rx="22" ry="4" fill="#fff" opacity="0.9"/>
                  
                  <!-- Glass highlight -->
                  <path d="M30 25 Q30 22 33 22 L35 22 Q38 22 38 25 L38 95" 
                        fill="none" stroke="#fff" stroke-width="1.5" opacity="0.3"/>
                </svg>
              </div>
            </div>
          </div>
          <div class="converter-results">
            <div class="result-item">
              <b data-i18n="lovibond_result">Lovibond:</b>
              <span id="lovibondResult">‚Äî</span>
            </div>
            <div class="result-item">
              <b data-i18n="srm_result">SRM:</b>
              <span id="srmResult">‚Äî</span>
            </div>
            <div class="result-item">
              <b data-i18n="ebc_result">EBC:</b>
              <span id="ebcResult">‚Äî</span>
            </div>
          </div>
          <div class="color-display">
            <div class="color-samples">
              <div class="color-sample">
                <div class="color-box" id="lovibondColorBox"></div>
                <span data-i18n="lovibond_color_label">Cor Lovibond</span>
              </div>
              <div class="color-sample">
                <div class="color-box" id="srmColorBox"></div>
                <span data-i18n="srm_color_label">Cor SRM</span>
              </div>
              <div class="color-sample">
                <div class="color-box" id="ebcColorBox"></div>
                <span data-i18n="ebc_color_label">Cor EBC</span>
              </div>
            </div>
          </div>
          <div class="color-ruler-container">
            <div class="color-ruler" id="colorRuler"></div>
            <div class="color-ruler-indicator" id="colorRulerIndicator"></div>
            <div class="color-ruler-labels">
              <span>SRM 1</span>
              <span>SRM 10</span>
              <span>SRM 20</span>
              <span>SRM 30</span>
              <span>SRM 40</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/* =====================  INTERNACIONALIZA√á√ÉO  ===================== */
const TRANSLATIONS = {
  pt: {
    main_title: "Radar de Cervejaria ‚Äì Visualiza√ß√£o & Compara√ß√£o",
    menu_hop_radar: "Radar de L√∫pulos",
    menu_yeast_radar: "Radar de Leveduras",
    menu_converter: "Conversor de Densidade",
    menu_abv: "Calculadora ABV",
    menu_color: "Conversor de Cor",
    color_title: "Conversor de Cor de Cerveja",
    color_input_type_label: "Tipo de entrada:",
    color_input_value_label: "Valor:",
    lovibond_option: "Lovibond",
    srm_option: "SRM",
    ebc_option: "EBC",
    lovibond_result: "Lovibond:",
    srm_result: "SRM:",
    ebc_result: "EBC:",
    lovibond_color_label: "Cor Lovibond",
    srm_color_label: "Cor SRM",
    ebc_color_label: "Cor EBC",
    beer_transparency_label: "Transpar√™ncia da cerveja:",
    subtitle: "Selecione um l√∫pulo para o <b>lado esquerdo</b> (azul) e, opcionalmente, outro para o <b>lado direito</b> (magenta). Passe o mouse no gr√°fico para ver os valores.",
    warning: "‚ö†Ô∏è se algum item n√£o estiver incluido na lista ou estiver incorreto, envie um email para reisraff@gmail.com",
    controls: "Controles",
    filter_label: "Filtro r√°pido (por nome, pa√≠s ou estilo)",
    filter_placeholder: "Ex.: IPA, Alemanha, Citra...",
    left_label: "Lado Esquerdo (Azul)",
    right_label: "Lado Direito (Magenta)",
    left_selector_label: "Selecionar L√∫pulo",
    right_selector_label: "Selecionar L√∫pulo",
    left_pill: "ESQUERDA",
    right_pill: "DIREITA",
    hint: "Dica: use o filtro para reduzir a lista por pa√≠s (ex.: <i>US</i>, <i>DE</i>, <i>GB</i>) ou por um estilo (ex.: <i>NEIPA</i>, <i>K√∂lsch</i>).",
    hint_right: "Opcional: selecione um segundo l√∫pulo para compara√ß√£o.",
    chart_title: "Gr√°fico em Teia",
    legend_left: "Esquerda",
    legend_right: "Direita",
    legend_scale: "Escala 0‚Äì10",
    footnote: "As pontas representam as caracter√≠sticas com seus √≠cones: ‚òï Ch√°, üçã C√≠trico, üåø Verde, üçØ Caramelado, üå≥ Amadeirado, üå∂Ô∏è Picante, ‚ùÑÔ∏è Mentolado, üå± Herbal, ü•¨ Vegetal, üå∏ Floral, üçè Fruta Verde, üçì Fruta Vermelha, üçå Fruta Amarela, üçë Fruta Doce.",
    select_left: "‚Äî escolher ‚Äî",
    select_right: "‚Äî (opcional) ‚Äî",
    select_hop: "Selecione um l√∫pulo para popular os detalhes.",
    hop_name: "Nome:",
    hop_country: "Pa√≠s:",
    hop_styles: "Estilos:",
    tab_aroma: "Perfil Arom√°tico",
    tab_chemical: "Composi√ß√£o Qu√≠mica",
    chemical_title: "Composi√ß√£o Qu√≠mica",
    chemical_footnote: "Compara√ß√£o dos n√≠veis de √°cidos alfa, √°cidos beta e √≥leos essenciais totais.",
    compounds_title: "Compostos Arom√°ticos",
    compounds_footnote: "Compara√ß√£o dos compostos arom√°ticos: Mirceno, Humuleno, Cariofileno, Farneseno, Linalol, Geraniol e Polifen√≥is.",
    legend_percent: "% / ml/100g",
    // Yeast translations
    left_label_yeast: "Lado Esquerdo (Azul)",
    right_label_yeast: "Lado Direito (Magenta)",
    filter_label_yeast: "Filtro r√°pido (por nome, pa√≠s ou tipo)",
    filter_placeholder_yeast: "Ex.: Ale, Lager, US-05...",
    left_selector_label_yeast: "Selecionar Levedura",
    right_selector_label_yeast: "Selecionar Levedura",
    hint_yeast: "Dica: use o filtro para reduzir a lista por pa√≠s (ex.: <i>US</i>, <i>DE</i>, <i>GB</i>) ou por um tipo (ex.: <i>Ale</i>, <i>Lager</i>).",
    hint_right_yeast: "Opcional: selecione uma segunda levedura para compara√ß√£o.",
    tab_yeast_aroma: "Perfil de Fermenta√ß√£o",
    tab_yeast_specs: "Especifica√ß√µes",
    yeast_chart_title: "Gr√°fico em Teia",
    yeast_specs_title: "Especifica√ß√µes",
    yeast_footnote: "As pontas representam as caracter√≠sticas: Frutal, Floral, Picante, Fenol, Ester, Limpo, Cremoso, Mineral, Alco√≥lico, Acidez, Complexo, Selva, Terroso, Doce.",
    // Converter translations
    converter_title: "Conversor de Densidade",
    input_type_label: "Tipo de entrada:",
    input_value_label: "Valor:",
    plato_option: "Plato/BRIX",
    gravity_option: "Gravity",
    plato_result: "Plato/BRIX:",
    gravity_result: "Gravity:",
    // ABV Calculator translations
    abv_title: "Calculadora de ABV",
    og_type_label: "Tipo de Gravidade Original:",
    og_value_label: "Valor OG:",
    fg_method_label: "M√©todo de Medi√ß√£o FG:",
    hydrometer_option: "Dens√≠metro",
    refractometer_option: "Refrat√¥metro",
    fg_type_label: "Tipo de Gravidade Final:",
    fg_value_label: "Valor FG:",
    correction_factor_label: "Fator de Corre√ß√£o:",
    density_gravity_result: "Gravity:",
    density_plato_result: "Plato/BRIX:",
    abv_result: "ABV:",
    abw_result: "ABW:",
    yeast_specs_footnote: "Compara√ß√£o de toler√¢ncia ao √°lcool e faixa de temperatura ideal.",
    select_left_yeast: "‚Äî escolher ‚Äî",
    select_right_yeast: "‚Äî (opcional) ‚Äî",
    select_yeast: "Selecione uma levedura para popular os detalhes.",
    yeast_name: "Nome:",
    yeast_country: "Pa√≠s:",
    yeast_types: "Tipos:",
    yeast_abv: "Toler√¢ncia ABV:",
    yeast_temp: "Temperatura:",
    yeast_source: "Fonte:",
    yeast_title: "Radar de Leveduras",
    yeast_subtitle: "Selecione uma levedura para o <b>lado esquerdo</b> (azul) e, opcionalmente, outra para o <b>lado direito</b> (magenta). Passe o mouse no gr√°fico para ver os valores.",
    
    // Aroma labels
    aroma_labels: ["Ch√°", "C√≠trico", "Verde", "Caramelado", "Amadeirado", "Picante", "Mentolado", "Herbal", "Vegetal", "Floral", "Fruta Verde", "Fruta Vermelha", "Fruta Amarela", "Fruta Doce"],
    yeast_aroma_labels: ["Frutal", "Floral", "Picante", "Fenol", "Ester", "Limpo", "Cremoso", "Mineral", "Alco√≥lico", "Acidez", "Complexo", "Selva", "Terroso", "Doce"],
    chemical_labels: ["√Åcidos Alfa (%)", "√Åcidos Beta (%)", "√ìleos Essenciais (ml/100g)"],
    compounds_labels: ["Mirceno (%)", "Humuleno (%)", "Cariofileno (%)", "Farneseno (%)", "Linalol (%)", "Geraniol (%)", "Polifen√≥is (%)"],
    yeast_specs_labels: ["Toler√¢ncia ABV (%)", "Temp. M√≠nima (¬∞C)", "Temp. M√°xima (¬∞C)"]
  },
  en: {
    main_title: "Brewery Radar ‚Äì Visualization & Comparison",
    menu_hop_radar: "Hop Radar",
    menu_yeast_radar: "Yeast Radar",
    menu_converter: "Density Converter",
    menu_abv: "ABV Calculator",
    menu_color: "Color Converter",
    color_title: "Beer Color Converter",
    color_input_type_label: "Input type:",
    color_input_value_label: "Value:",
    lovibond_option: "Lovibond",
    srm_option: "SRM",
    ebc_option: "EBC",
    lovibond_result: "Lovibond:",
    srm_result: "SRM:",
    ebc_result: "EBC:",
    lovibond_color_label: "Lovibond Color",
    srm_color_label: "SRM Color",
    ebc_color_label: "EBC Color",
    beer_transparency_label: "Beer transparency:",
    title: "Hop Radar ‚Äì Visualization & Comparison",
    subtitle: "Select a hop for the <b>left side</b> (blue) and optionally another for the <b>right side</b> (magenta). Hover over the chart to see values.",
    warning: "‚ö†Ô∏è If any item is not included in the list or is incorrect, send an email to reisraff@gmail.com",
    controls: "Controls",
    filter_label: "Quick filter (by name, country or style)",
    filter_placeholder: "Ex.: IPA, Germany, Citra...",
    left_label: "Left Side (Blue)",
    right_label: "Right Side (Magenta)",
    left_selector_label: "Select Hop",
    right_selector_label: "Select Hop",
    left_pill: "LEFT",
    right_pill: "RIGHT",
    hint: "Tip: use the filter to narrow the list by country (ex.: <i>US</i>, <i>DE</i>, <i>GB</i>) or by style (ex.: <i>NEIPA</i>, <i>K√∂lsch</i>).",
    hint_right: "Optional: select a second hop for comparison.",
    chart_title: "Radar Chart",
    legend_left: "Left",
    legend_right: "Right",
    legend_scale: "Scale 0‚Äì10",
    footnote: "The points represent characteristics with their icons: ‚òï Tea, üçã Citrus, üåø Green, üçØ Caramel, üå≥ Woody, üå∂Ô∏è Spicy, ‚ùÑÔ∏è Menthol, üå± Herbal, ü•¨ Vegetal, üå∏ Floral, üçè Green Fruit, üçì Red Fruit, üçå Yellow Fruit, üçë Sweet Fruit.",
    select_left: "‚Äî choose ‚Äî",
    select_right: "‚Äî (optional) ‚Äî",
    select_hop: "Select a hop to populate details.",
    hop_name: "Name:",
    hop_country: "Country:",
    hop_styles: "Styles:",
    tab_aroma: "Aroma Profile",
    tab_chemical: "Chemical Composition",
    chemical_title: "Chemical Composition",
    chemical_footnote: "Comparison of alpha acid, beta acid and total essential oil levels.",
    compounds_title: "Aromatic Compounds",
    compounds_footnote: "Comparison of aromatic compounds: Myrcene, Humulene, Caryophyllene, Farnesene, Linalool, Geraniol and Polyphenols.",
    legend_percent: "% / ml/100g",
    
    // Yeast translations
    left_label_yeast: "Left Side (Blue)",
    right_label_yeast: "Right Side (Magenta)",
    filter_label_yeast: "Quick filter (by name, country or type)",
    filter_placeholder_yeast: "Ex.: Ale, Lager, US-05...",
    left_selector_label_yeast: "Select Yeast",
    right_selector_label_yeast: "Select Yeast",
    hint_yeast: "Tip: use the filter to narrow the list by country (ex.: <i>US</i>, <i>DE</i>, <i>GB</i>) or by type (ex.: <i>Ale</i>, <i>Lager</i>).",
    hint_right_yeast: "Optional: select a second yeast for comparison.",
    tab_yeast_aroma: "Fermentation Profile",
    tab_yeast_specs: "Specifications",
    yeast_chart_title: "Radar Chart",
    yeast_specs_title: "Specifications",
    yeast_footnote: "The points represent characteristics: Fruity, Floral, Spicy, Phenol, Ester, Clean, Creamy, Mineral, Alcoholic, Acidity, Complex, Wild, Earthy, Sweet.",
    // Converter translations
    converter_title: "Density Converter",
    input_type_label: "Input type:",
    input_value_label: "Value:",
    plato_option: "Plato/BRIX",
    gravity_option: "Gravity",
    plato_result: "Plato/BRIX:",
    gravity_result: "Gravity:",
    // ABV Calculator translations
    abv_title: "ABV Calculator",
    og_type_label: "Original Gravity Type:",
    og_value_label: "OG Value:",
    fg_method_label: "FG Measurement Method:",
    hydrometer_option: "Hydrometer",
    refractometer_option: "Refractometer",
    fg_type_label: "Final Gravity Type:",
    fg_value_label: "FG Value:",
    correction_factor_label: "Correction Factor:",
    density_gravity_result: "Gravity:",
    density_plato_result: "Plato/BRIX:",
    abv_result: "ABV:",
    abw_result: "ABW:",
    yeast_specs_footnote: "Comparison of alcohol tolerance and ideal temperature range.",
    select_left_yeast: "‚Äî choose ‚Äî",
    select_right_yeast: "‚Äî (optional) ‚Äî",
    select_yeast: "Select a yeast to populate details.",
    yeast_name: "Name:",
    yeast_country: "Country:",
    yeast_types: "Types:",
    yeast_abv: "ABV Tolerance:",
    yeast_temp: "Temperature:",
    yeast_source: "Source:",
    yeast_title: "Yeast Radar",
    yeast_subtitle: "Select a yeast for the <b>left side</b> (blue) and optionally another for the <b>right side</b> (magenta). Hover over the chart to see values.",
    
    // Aroma labels
    aroma_labels: ["Tea", "Citrus", "Green", "Caramel", "Woody", "Spicy", "Menthol", "Herbal", "Vegetal", "Floral", "Green Fruit", "Red Fruit", "Yellow Fruit", "Sweet Fruit"],
    yeast_aroma_labels: ["Fruity", "Floral", "Spicy", "Phenol", "Ester", "Clean", "Creamy", "Mineral", "Alcoholic", "Acidity", "Complex", "Wild", "Earthy", "Sweet"],
    chemical_labels: ["Alpha Acids (%)", "Beta Acids (%)", "Essential Oils (ml/100g)"],
    compounds_labels: ["Myrcene (%)", "Humulene (%)", "Caryophyllene (%)", "Farnesene (%)", "Linalool (%)", "Geraniol (%)", "Polyphenols (%)"],
    yeast_specs_labels: ["ABV Tolerance (%)", "Min. Temp (¬∞C)", "Max. Temp (¬∞C)"]
  },
  es: {
    main_title: "Radar de Cervecer√≠a ‚Äì Visualizaci√≥n y Comparaci√≥n",
    menu_hop_radar: "Radar de L√∫pulos",
    menu_yeast_radar: "Radar de Levaduras",
    menu_converter: "Convertidor de Densidad",
    menu_abv: "Calculadora ABV",
    menu_color: "Convertidor de Color",
    color_title: "Convertidor de Color de Cerveza",
    color_input_type_label: "Tipo de entrada:",
    color_input_value_label: "Valor:",
    lovibond_option: "Lovibond",
    srm_option: "SRM",
    ebc_option: "EBC",
    lovibond_result: "Lovibond:",
    srm_result: "SRM:",
    ebc_result: "EBC:",
    lovibond_color_label: "Color Lovibond",
    srm_color_label: "Color SRM",
    ebc_color_label: "Color EBC",
    beer_transparency_label: "Transparencia de la cerveza:",
    title: "Radar de L√∫pulos ‚Äì Visualizaci√≥n y Comparaci√≥n",
    subtitle: "Selecciona un l√∫pulo para el <b>lado izquierdo</b> (azul) y opcionalmente otro para el <b>lado derecho</b> (magenta). Pasa el mouse sobre el gr√°fico para ver los valores.",
    warning: "‚ö†Ô∏è Si alg√∫n elemento no est√° incluido en la lista o es incorrecto, env√≠a un email a reisraff@gmail.com",
    controls: "Controles",
    filter_label: "Filtro r√°pido (por nombre, pa√≠s o estilo)",
    filter_placeholder: "Ej.: IPA, Alemania, Citra...",
    left_label: "Lado Izquierdo (Azul)",
    right_label: "Lado Derecho (Magenta)",
    left_selector_label: "Seleccionar L√∫pulo",
    right_selector_label: "Seleccionar L√∫pulo",
    left_pill: "IZQUIERDA",
    right_pill: "DERECHA",
    hint: "Consejo: usa el filtro para reducir la lista por pa√≠s (ej.: <i>US</i>, <i>DE</i>, <i>GB</i>) o por estilo (ej.: <i>NEIPA</i>, <i>K√∂lsch</i>).",
    hint_right: "Opcional: selecciona un segundo l√∫pulo para comparaci√≥n.",
    chart_title: "Gr√°fico Radial",
    legend_left: "Izquierda",
    legend_right: "Derecha",
    legend_scale: "Escala 0‚Äì10",
    footnote: "Los puntos representan las caracter√≠sticas con sus √≠conos: ‚òï T√©, üçã C√≠trico, üåø Verde, üçØ Caramelo, üå≥ Amaderado, üå∂Ô∏è Picante, ‚ùÑÔ∏è Mentol, üå± Herbal, ü•¨ Vegetal, üå∏ Floral, üçè Fruta Verde, üçì Fruta Roja, üçå Fruta Amarilla, üçë Fruta Dulce.",
    select_left: "‚Äî elegir ‚Äî",
    select_right: "‚Äî (opcional) ‚Äî",
    select_hop: "Selecciona un l√∫pulo para mostrar detalles.",
    hop_name: "Nombre:",
    hop_country: "Pa√≠s:",
    hop_styles: "Estilos:",
    tab_aroma: "Perfil Arom√°tico",
    tab_chemical: "Composici√≥n Qu√≠mica",
    chemical_title: "Composici√≥n Qu√≠mica",
    chemical_footnote: "Comparaci√≥n de los niveles de √°cidos alfa, √°cidos beta y aceites esenciales totales.",
    compounds_title: "Compuestos Arom√°ticos",
    compounds_footnote: "Comparaci√≥n de compuestos arom√°ticos: Mirceno, Humuleno, Cariofileno, Farneseno, Linalol, Geraniol y Polifenoles.",
    legend_percent: "% / ml/100g",
    
    // Yeast translations
    left_label_yeast: "Lado Izquierdo (Azul)",
    right_label_yeast: "Lado Derecho (Magenta)",
    filter_label_yeast: "Filtro r√°pido (por nombre, pa√≠s o tipo)",
    filter_placeholder_yeast: "Ej.: Ale, Lager, US-05...",
    left_selector_label_yeast: "Seleccionar Levadura",
    right_selector_label_yeast: "Seleccionar Levadura",
    hint_yeast: "Consejo: usa el filtro para reducir la lista por pa√≠s (ej.: <i>US</i>, <i>DE</i>, <i>GB</i>) o por tipo (ej.: <i>Ale</i>, <i>Lager</i>).",
    hint_right_yeast: "Opcional: selecciona una segunda levadura para comparaci√≥n.",
    tab_yeast_aroma: "Perfil de Fermentaci√≥n",
    tab_yeast_specs: "Especificaciones",
    yeast_chart_title: "Gr√°fico Radial",
    yeast_specs_title: "Especificaciones",
    yeast_footnote: "Los puntos representan las caracter√≠sticas: Frutal, Floral, Picante, Fenol, Ester, Limpio, Cremoso, Mineral, Alcoh√≥lico, Acidez, Complejo, Selva, Terroso, Dulce.",
    // Converter translations
    converter_title: "Convertidor de Densidad",
    input_type_label: "Tipo de entrada:",
    input_value_label: "Valor:",
    plato_option: "Plato/BRIX",
    gravity_option: "Gravity",
    plato_result: "Plato/BRIX:",
    gravity_result: "Gravity:",
    // ABV Calculator translations
    abv_title: "Calculadora ABV",
    og_type_label: "Tipo de Gravedad Original:",
    og_value_label: "Valor OG:",
    fg_method_label: "M√©todo de Medici√≥n FG:",
    hydrometer_option: "Dens√≠metro",
    refractometer_option: "Refract√≥metro",
    fg_type_label: "Tipo de Gravedad Final:",
    fg_value_label: "Valor FG:",
    correction_factor_label: "Factor de Correcci√≥n:",
    density_gravity_result: "Gravity:",
    density_plato_result: "Plato/BRIX:",
    abv_result: "ABV:",
    abw_result: "ABW:",
    yeast_specs_footnote: "Comparaci√≥n de tolerancia al alcohol y rango de temperatura ideal.",
    select_left_yeast: "‚Äî elegir ‚Äî",
    select_right_yeast: "‚Äî (opcional) ‚Äî",
    select_yeast: "Selecciona una levadura para mostrar detalles.",
    yeast_name: "Nombre:",
    yeast_country: "Pa√≠s:",
    yeast_types: "Tipos:",
    yeast_abv: "Tolerancia ABV:",
    yeast_temp: "Temperatura:",
    yeast_source: "Fuente:",
    yeast_title: "Radar de Levaduras",
    yeast_subtitle: "Selecciona una levadura para el <b>lado izquierdo</b> (azul) y opcionalmente otra para el <b>lado derecho</b> (magenta). Pasa el mouse sobre el gr√°fico para ver los valores.",
    
    // Aroma labels
    aroma_labels: ["T√©", "C√≠trico", "Verde", "Caramelo", "Amaderado", "Picante", "Mentol", "Herbal", "Vegetal", "Floral", "Fruta Verde", "Fruta Roja", "Fruta Amarilla", "Fruta Dulce"],
    yeast_aroma_labels: ["Frutal", "Floral", "Picante", "Fenol", "Ester", "Limpio", "Cremoso", "Mineral", "Alcoh√≥lico", "Acidez", "Complejo", "Selva", "Terroso", "Dulce"],
    chemical_labels: ["√Åcidos Alfa (%)", "√Åcidos Beta (%)", "Aceites Esenciales (ml/100g)"],
    compounds_labels: ["Mirceno (%)", "Humuleno (%)", "Cariofileno (%)", "Farneseno (%)", "Linalol (%)", "Geraniol (%)", "Polifenoles (%)"],
    yeast_specs_labels: ["Tolerancia ABV (%)", "Temp. M√≠nima (¬∞C)", "Temp. M√°xima (¬∞C)"]
  }
};

let currentLang = localStorage.getItem('hop-radar-lang') || 'pt';

/* =====================  DADOS (CSV incorporado)  ===================== */
const csv = `L√∫pulo,Pa√≠s,Ch√°,C√≠trico,Verde,Caramelado,Amadeirado,Picante,Mentolado,Herbal,Vegetal,Floral,Fruta Verde,Fruta Vermelha,Fruta Amarela,Fruta Doce,Estilos,AA_min_%,AA_max_%,BA_min_%,BA_max_%,Oils_min_ml_100g,Oils_max_ml_100g,Myrcene_min_%,Myrcene_max_%,Humulene_min_%,Humulene_max_%,Caryophyllene_min_%,Caryophyllene_max_%,Farnesene_min_%,Farnesene_max_%,Linalool_min_%,Linalool_max_%,Geraniol_min_%,Geraniol_max_%,Polyphenols_min_%,Polyphenols_max_%
Cascade,US,3,8,4,2,2,3,1,4,3,7,5,2,6,3,"APA, IPA, Blonde, Amber",4.0,9.0,5.5,9.0,0.5,2.0,40.0,60.0,10.0,20.0,4.0,10.0,4.5,8.5,0.1,0.6,0.1,0.5,,
Centennial,US,3,8,4,3,3,4,1,4,2,6,5,3,7,3,"IPA, APA, Red Ale",7.0,12.0,3.5,5.5,1.0,3.0,55.0,65.0,10.0,20.0,5.0,7.0,0.0,1.0,0.6,0.9,1.2,1.8,,
Chinook,US,2,7,5,3,4,6,2,4,3,4,4,2,5,3,"IPA, American Stout, Barleywine",11.0,15.0,3.0,4.0,1.5,3.0,35.0,45.0,18.0,24.0,9.0,12.0,0.0,1.0,0.4,0.8,0.2,0.6,,
Citra,US,1,10,3,1,2,2,1,3,2,5,7,3,9,8,"IPA, NEIPA, Pale Ale",10.0,16.0,3.5,4.5,2.2,2.8,60.0,65.0,11.0,13.0,6.0,8.0,0.0,1.0,1.0,2.0,,,4.5,5.5
Columbus (CTZ),US,3,6,5,2,5,7,2,5,4,3,3,2,4,2,"IPA, Imperial IPA, Porter",15.0,18.0,4.5,6.0,2.0,4.0,45.0,60.0,9.0,14.0,6.0,10.0,0.1,1.0,0.3,0.6,0.2,0.8,,
Amarillo,US,2,8,3,2,2,3,1,3,2,8,6,4,8,6,"APA, IPA, Wheat Ale",8.0,11.0,6.0,7.0,1.5,2.5,60.0,70.0,8.0,20.0,5.0,10.0,0.0,1.0,0.6,1.2,0.2,0.8,,
Simcoe,US,2,7,4,2,4,5,1,5,3,5,6,3,7,4,"IPA, NEIPA, Amber",12.0,16.0,4.0,5.0,2.0,4.5,50.0,65.0,12.0,20.0,6.0,10.0,0.0,1.0,0.5,0.9,0.2,0.8,,
Mosaic,US,2,9,3,2,3,4,2,5,3,6,7,5,8,7,"IPA, NEIPA, APA",10.0,14.0,3.0,4.5,1.0,3.0,45.0,55.0,10.0,16.0,5.0,9.0,0.0,1.0,0.4,0.8,0.2,0.6,,
El Dorado,US,1,8,2,2,2,2,1,3,2,5,6,5,9,8,"IPA, Fruit Ale",13.0,17.0,7.0,8.0,1.5,2.5,50.0,60.0,10.0,16.0,5.0,8.0,0.0,1.0,0.3,0.7,0.1,0.5,,
Sabro,US,2,7,3,2,3,3,3,4,2,6,7,4,9,9,"NEIPA, Fruited IPA",12.0,16.0,4.0,5.0,2.0,3.5,35.0,50.0,10.0,16.0,6.0,10.0,0.0,1.0,0.5,1.0,0.5,1.0,,
Idaho 7,US,2,8,3,2,3,4,2,5,3,6,6,4,8,6,"IPA, Hazy",9.0,14.0,5.0,7.0,1.0,3.0,40.0,55.0,10.0,18.0,6.0,9.0,0.0,1.0,0.5,1.0,0.2,0.8,,
Cashmere,US,2,8,2,2,2,2,2,3,2,7,6,5,8,7,"APA, K√∂lsch moderna",7.7,9.1,6.4,7.1,1.2,1.4,39.0,42.0,26.0,29.0,11.5,13.0,0.0,1.0,0.3,0.7,0.1,0.4,,
Ekuanot,US,2,8,4,2,3,3,3,5,3,6,6,4,8,6,"IPA, NEIPA, APA, Sour, Saison moderna",13.0,16.0,4.5,5.5,2.0,4.0,50.0,55.0,10.0,15.0,8.0,10.0,0.0,1.0,0.7,1.2,0.3,0.8,,
Comet,US,3,7,4,2,3,4,1,5,3,6,7,3,7,4,"Pale Ale, Lager lupulada",9.0,12.0,3.0,4.5,1.0,2.0,35.0,55.0,10.0,20.0,6.0,10.0,0.0,1.0,0.3,0.7,0.2,0.6,,
Hallertau Mittelfr√ºh,DE,7,2,3,3,4,5,2,8,4,7,2,1,2,2,"Lager, Pilsner",3.0,5.5,3.0,5.0,0.5,1.3,20.0,30.0,30.0,40.0,6.0,12.0,0.1,1.0,0.7,1.1,0.1,0.3,,
Tradition,DE,6,3,3,3,4,5,2,8,4,6,3,2,2,2,"Helles, K√∂lsch",4.0,7.0,3.0,5.5,0.8,1.5,20.0,35.0,25.0,35.0,7.0,12.0,0.1,1.0,,,,,,
Blanc,DE,3,8,3,2,2,3,2,4,2,6,6,5,8,7,"IPA, Saison moderna",9.0,12.0,5.0,6.5,1.2,1.8,20.0,30.0,30.0,40.0,8.0,12.0,0.1,1.0,0.6,1.0,,,,
Magnum,DE,5,2,3,2,3,5,2,6,4,4,2,1,2,2,"Bock, Pils",11.0,16.0,5.0,7.0,1.4,2.1,45.0,55.0,18.0,22.0,7.0,10.0,,,,,,,,
Tettnang,DE,6,3,3,3,3,5,2,7,4,6,3,2,2,2,"Lager, Wheat",3.0,6.0,3.0,5.0,0.5,1.0,20.0,35.0,20.0,30.0,8.0,12.0,0.0,1.0,,,,,,
Spalt,DE,6,2,3,3,4,6,2,7,4,7,2,1,2,2,"Altbier, Pils",2.5,5.5,3.0,5.0,0.5,0.9,20.0,35.0,20.0,30.0,8.0,13.0,12.0,18.0,0.3,0.8,0.2,0.5,,
Hersbrucker,DE,6,2,3,3,3,5,2,7,4,6,2,1,2,2,"Lager leve, Weiss",2.0,5.0,2.5,5.0,0.5,1.0,20.0,35.0,30.0,40.0,8.0,12.0,0.1,1.0,,,,,,
Perle,DE,5,3,3,2,4,6,2,6,3,6,3,2,3,2,"Pilsner, K√∂lsch",6.0,9.0,2.5,4.5,0.8,1.5,35.0,50.0,18.0,25.0,8.0,12.0,,,,,,,,
Mandarina Bavaria,DE,2,8,3,2,2,3,2,4,2,6,7,4,8,7,"IPA, Witbier",7.0,10.0,5.0,6.5,1.5,2.3,35.0,45.0,18.0,25.0,7.0,10.0,,,0.8,1.5,,,,
Huell Melon,DE,2,6,3,2,2,2,1,3,2,6,6,4,8,8,"Saison, Wheat",6.0,8.0,6.0,8.0,0.8,1.5,30.0,40.0,20.0,30.0,8.0,12.0,,,0.6,1.2,,,,
Polaris,DE,2,7,3,2,3,3,5,4,3,6,7,4,8,8,"IPA, Lager arom√°tica",18.0,23.0,3.0,5.0,2.5,4.5,40.0,55.0,16.0,22.0,8.0,12.0,,,,,,,,
East Kent Goldings,GB,7,2,3,4,4,4,2,7,3,8,2,2,2,3,"ESB, Bitter",4.0,6.5,2.0,3.5,0.4,1.0,20.0,35.0,20.0,30.0,8.0,12.0,0.5,1.0,,,,,,
Fuggle,GB,7,2,3,3,5,5,2,7,3,7,2,1,2,2,"Porter, Bitter",3.0,5.5,2.0,3.0,0.7,1.2,20.0,35.0,20.0,30.0,8.0,12.0,,,,,,,,
Challenger,GB,5,3,3,3,4,5,2,6,3,6,3,2,3,2,"ESB, IPA inglesa",6.5,9.5,3.5,4.5,1.0,1.8,25.0,35.0,20.0,30.0,8.0,12.0,,,,,,,,
Target,GB,5,3,3,3,5,6,2,6,3,5,3,2,3,2,"Bitter, IPA",9.0,12.0,3.5,5.0,1.0,1.8,35.0,45.0,15.0,25.0,8.0,12.0,,,,,,,,
Northdown,GB,5,3,3,3,4,6,2,6,3,6,3,2,3,2,"Porter, Bitter",7.0,10.0,3.5,5.5,1.2,1.8,30.0,40.0,18.0,25.0,8.0,12.0,,,,,,,,
Progress,GB,6,3,3,3,4,4,2,6,3,7,3,2,3,2,"Bitter, Mild",5.0,7.0,2.0,3.0,0.8,1.2,25.0,35.0,20.0,30.0,8.0,12.0,,,,,,,,
Admiral,GB,5,4,3,3,4,5,2,5,3,6,3,2,4,2,"Bitter, IPA",13.0,16.0,4.0,6.0,1.0,2.0,35.0,45.0,15.0,25.0,8.0,12.0,,,,,,,,
Saaz,CZ,8,2,3,3,3,5,2,9,4,8,2,1,2,2,"Pilsner, Lager",2.0,6.0,3.0,4.5,0.4,1.0,20.0,35.0,20.0,30.0,8.0,12.0,12.0,18.0,,,,,,
Sladek,CZ,6,5,3,3,3,4,2,6,3,6,4,3,5,3,Pilsner moderna,4.0,8.0,4.0,6.0,0.8,1.6,30.0,40.0,18.0,25.0,8.0,12.0,,,,,,,,
Premiant,CZ,6,4,3,3,3,4,2,6,3,6,3,2,4,3,"Lager, Pilsner",7.0,10.0,4.0,6.0,1.0,1.6,35.0,45.0,18.0,25.0,8.0,12.0,,,,,,,,
Kazbek,CZ,5,6,3,2,3,4,2,5,3,6,5,3,6,4,Lager arom√°tica,5.0,8.0,4.0,6.0,0.9,1.5,35.0,45.0,18.0,25.0,8.0,12.0,,,,,,,,
Nelson Sauvin,NZ,2,7,3,2,3,3,2,4,2,6,8,3,6,5,"IPA, Saison",10.0,13.0,6.0,8.0,0.9,1.2,35.0,40.0,15.0,20.0,8.0,12.0,8.0,12.0,0.6,1.2,0.2,0.6,,
Motueka,NZ,3,8,3,2,2,3,2,5,2,6,7,3,7,6,"Lager lupulada, IPA",6.5,8.5,5.0,5.5,0.8,1.5,45.0,60.0,10.0,15.0,6.0,9.0,10.0,15.0,0.8,2.0,0.8,1.5,,
Riwaka,NZ,2,9,3,2,2,3,2,4,2,5,8,3,7,6,"NEIPA, APA",4.5,6.5,4.0,5.0,0.8,1.2,45.0,60.0,10.0,15.0,6.0,9.0,4.0,8.0,,,,,,
Wai-iti,NZ,2,7,2,2,2,2,1,3,2,6,6,3,7,6,Pale Ale leve,3.0,4.5,3.5,4.5,0.6,1.0,45.0,55.0,10.0,15.0,6.0,9.0,8.0,12.0,,,,,,
Pacifica,NZ,3,6,3,3,3,3,2,6,3,6,5,2,5,4,"Lager, Pilsner",5.0,6.5,6.0,8.0,0.8,1.2,35.0,45.0,15.0,25.0,8.0,12.0,0.0,1.0,,,,,,
Rakau,NZ,3,7,3,2,3,3,2,5,3,6,6,4,7,6,"IPA, APA",10.0,11.0,5.0,7.0,1.5,2.0,45.0,55.0,10.0,15.0,6.0,9.0,3.0,6.0,,,,,,
Pacific Jade,NZ,2,7,4,2,3,6,2,6,3,5,4,3,7,4,"IPA, Pale Ale, Lager, Strong Ale",12.0,14.0,8.0,10.0,1.4,2.0,30.0,40.0,20.0,30.0,8.0,12.0,2.0,4.0,,,,,,
Wakatu,NZ,3,7,4,2,3,2,2,6,3,7,4,2,8,4,"Pale Ale, Lager, Blonde Ale, Golden Ale",6.5,8.5,7.0,8.0,0.8,1.2,30.0,40.0,20.0,30.0,8.0,12.0,12.0,18.0,,,,,,
Galaxy,AU,2,9,3,1,2,3,1,3,2,6,7,6,9,8,"NEIPA, Hazy",13.0,18.5,6.1,11.6,1.9,2.9,32.0,56.0,0.8,2.2,7.0,14.7,2.8,5.1,0.5,1.0,0.1,0.3,,
Vic Secret,AU,2,8,3,2,3,3,2,4,2,5,7,4,8,7,"IPA, APA",14.0,17.0,6.0,7.0,2.0,2.6,50.0,60.0,10.0,15.0,8.0,12.0,,,,,,,,
Ella,AU,3,7,3,2,3,3,2,5,2,6,6,4,7,6,"Saison, Belgian IPA",13.0,16.0,4.0,7.0,1.5,2.4,30.0,40.0,18.0,25.0,8.0,12.0,,,,,,,,
Enigma,AU,2,8,3,2,3,3,2,4,2,6,7,4,8,7,"IPA, NEIPA",15.0,18.0,4.8,6.4,2.4,3.0,35.0,45.0,15.0,20.0,8.0,12.0,,,,,,,,
Eclipse,AU,2,9,3,2,2,3,2,4,2,5,7,4,9,8,"NEIPA, Pale Ale",15.0,19.0,4.5,6.5,2.0,3.0,35.0,45.0,15.0,20.0,8.0,12.0,,,,,,,,
Topaz,AU,3,7,3,2,3,4,2,5,3,6,6,4,7,6,"IPA, Pale Ale",13.0,18.0,5.0,7.0,1.5,2.5,30.0,40.0,18.0,25.0,8.0,12.0,,,,,,,,
Strisselspalt,FR,7,2,3,3,4,4,2,7,3,8,2,1,2,2,"Lager, Belgian Ale",3.0,6.0,2.0,3.5,0.5,0.9,20.0,35.0,20.0,30.0,8.0,12.0,,,,,,,,
Aramis,FR,6,4,3,3,3,5,2,6,3,7,4,3,5,3,Pilsner moderna,6.0,8.0,3.5,4.5,0.7,1.2,20.0,35.0,20.0,30.0,8.0,12.0,,,,,,,,
Barbe Rouge,FR,3,6,3,2,2,3,2,4,2,6,6,7,8,7,IPA frutada,7.0,10.0,3.5,4.5,1.1,1.6,35.0,60.0,15.0,25.0,8.0,12.0,,,,,,,,
Mistral,FR,3,6,3,2,3,3,2,5,2,6,6,4,7,6,"Saison, APA",7.0,9.0,3.0,5.0,1.2,1.8,30.0,40.0,18.0,25.0,8.0,12.0,,,,,,,,
L√∫pulo Le√≥n,ES,6,4,3,3,4,4,2,6,3,7,4,3,4,3,Lager artesanal,5.0,8.0,3.0,5.0,0.8,1.3,,,,,,,,,,,,,,
Mapuche,AR,5,6,3,3,3,4,2,5,3,6,4,3,5,4,"IPA, APA",5.0,7.0,3.0,5.0,0.8,1.5,,,,,,,,,,,,,,
Cascade Patagonia,AR,3,8,4,2,2,3,1,4,3,7,5,2,6,3,"APA, IPA",4.0,9.0,5.5,9.0,0.5,2.0,40.0,60.0,10.0,20.0,4.0,10.0,4.5,8.5,,,,,,
Nugget Patagonia,AR,4,5,4,3,4,6,2,6,3,6,3,2,4,3,"IPA, Stout",11.0,14.0,4.0,6.0,1.5,2.0,45.0,55.0,18.0,25.0,8.0,12.0,,,,,,,,
Willamette,US,6.0,8.0,4.0,2.0,4.0,4.0,2.0,6.0,3.0,7.0,5.0,5.0,7.0,6.0,"Bitter, Pale Ale, Porter, Brown, ESB",4.0,7.0,3.0,4.5,1.0,1.5,30.0,55.0,20.0,35.0,7.0,14.0,5.0,10.0,0.4,0.6,0.1,0.5,3.5,6.0
Northern Brewer,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"Altbier, Porter, Lager",7.0,10.0,3.0,5.0,0.6,1.2,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Cluster,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"Lager cl√°ssica, Cream Ale",5.5,8.5,4.0,5.5,0.4,1.0,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Galena,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"IPA, American Stout",11.0,14.0,7.0,9.0,1.5,2.5,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Horizon,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"IPA, Stout, Lager lupulada",10.5,13.5,5.5,7.5,1.1,2.2,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Liberty,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"Pilsner, Lager alem√£",3.0,5.5,3.0,5.0,0.6,1.2,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Mount Hood,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"Lager, K√∂lsch",5.0,8.0,4.0,7.0,0.8,1.6,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Crystal,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"Pale Ale leve, Lager",3.5,6.5,5.0,7.0,0.8,1.6,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Santiam,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"Lager, Ale belga",5.0,7.5,6.0,8.5,0.8,1.6,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Sterling,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"Pilsner, Lager",6.0,9.0,4.0,6.0,1.1,1.6,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Palisade,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"APA, Blonde, K√∂lsch",5.5,9.5,6.0,8.0,1.2,2.0,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Summit,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"Imperial IPA, IPA",16.0,19.0,4.0,6.0,1.5,2.5,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Warrior,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"IPA, Imperial IPA",15.0,17.0,4.0,6.0,1.5,2.0,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Apollo,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"IPA, Double IPA",15.0,19.0,5.5,8.0,1.5,2.5,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Bravo,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"IPA, Pale Ale",14.0,17.0,3.5,5.5,1.6,2.4,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Calypso,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"IPA, Cider-beer",12.0,14.0,3.0,5.5,1.2,2.0,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Azacca,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"NEIPA, IPA",14.0,16.0,4.0,5.5,1.6,2.5,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Ahtanum,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"Pale Ale, Amber Ale",5.0,7.0,5.0,6.5,0.8,1.2,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Loral,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"IPA, Lager lupulada",11.0,13.0,4.5,5.5,1.5,2.5,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Strata,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,3.0,3.0,4.0,5.0,3.0,7.0,7.0,"NEIPA, IPA",11.0,13.0,4.5,5.5,1.6,2.5,45.0,55.0,10.0,15.0,4.0,6.0,0.0,1.0,0.5,1.0,0.1,0.5,3.5,6.0
Talus,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,6.0,3.0,6.0,5.0,3.0,6.0,6.0,"Hazy IPA, Pale Ale",7.0,10.0,7.0,10.0,1.0,2.0,40.0,50.0,10.0,15.0,4.0,7.0,0.1,0.6,0.2,0.6,0.1,0.5,3.5,6.0
Sultana (Denali),US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"IPA, Hazy IPA",13.0,16.0,4.0,6.0,1.5,2.5,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Zappa,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"Experimental, Sour IPA",3.0,7.0,4.5,6.0,0.8,1.5,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
HBC 586,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"IPA, Hazy",10.0,12.0,4.0,5.5,1.0,2.0,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
HBC 630,US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"IPA, NEIPA",13.0,16.0,4.0,6.0,1.0,2.0,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Nugget (US),US,3.0,8.0,4.0,2.0,3.0,4.0,2.0,5.0,3.0,6.0,5.0,3.0,7.0,6.0,"Bittering, IPA",11.0,14.0,3.0,5.0,1.2,2.0,45.0,60.0,10.0,20.0,5.0,10.0,0.0,2.0,0.3,0.8,0.1,0.5,3.5,6.0
Bramling Cross,GB,7.0,2.0,3.0,4.0,4.0,4.0,2.0,7.0,3.0,8.0,2.0,2.0,2.0,3.0,"Porter, ESB, Bitter",5.0,7.0,2.0,3.5,0.8,1.3,20.0,35.0,20.0,30.0,8.0,12.0,0.0,5.0,0.3,0.9,0.1,0.4,4.0,6.0
First Gold,GB,7.0,2.0,3.0,4.0,4.0,4.0,2.0,7.0,3.0,8.0,2.0,2.0,2.0,3.0,"Golden Ale, Bitter",6.5,9.0,2.0,3.3,0.7,1.2,20.0,35.0,20.0,30.0,8.0,12.0,0.0,5.0,0.3,0.9,0.1,0.4,4.0,6.0
Pilgrim,GB,7.0,2.0,3.0,4.0,4.0,4.0,2.0,7.0,3.0,8.0,2.0,2.0,2.0,3.0,"Bitter, Stout",9.0,13.0,4.0,5.0,1.2,2.0,20.0,35.0,20.0,30.0,8.0,12.0,0.0,5.0,0.3,0.9,0.1,0.4,4.0,6.0
Phoenix,GB,7.0,2.0,3.0,4.0,4.0,4.0,2.0,7.0,3.0,8.0,2.0,2.0,2.0,3.0,"Porter, ESB",8.0,12.0,3.5,5.5,1.0,1.8,20.0,35.0,20.0,30.0,8.0,12.0,0.0,5.0,0.3,0.9,0.1,0.4,4.0,6.0
Boadicea,GB,7.0,2.0,3.0,4.0,4.0,4.0,2.0,7.0,3.0,8.0,2.0,2.0,2.0,3.0,"Golden Ale, Bitter",6.0,10.0,3.0,4.0,0.7,1.2,20.0,35.0,20.0,30.0,8.0,12.0,0.0,5.0,0.3,0.9,0.1,0.4,4.0,6.0
Endeavour,GB,7.0,2.0,3.0,4.0,4.0,4.0,2.0,7.0,3.0,8.0,2.0,2.0,2.0,3.0,"Pale Ale, Porter",9.0,11.0,3.0,4.5,1.0,1.6,20.0,35.0,20.0,30.0,8.0,12.0,0.0,5.0,0.3,0.9,0.1,0.4,4.0,6.0
Jester,GB,7.0,2.0,3.0,4.0,4.0,4.0,2.0,7.0,3.0,8.0,2.0,2.0,2.0,3.0,IPA inglesa moderna,7.0,9.0,3.5,5.0,0.8,1.4,20.0,35.0,20.0,30.0,8.0,12.0,0.0,5.0,0.3,0.9,0.1,0.4,4.0,6.0
Olicana,GB,7.0,2.0,3.0,4.0,4.0,4.0,2.0,7.0,3.0,8.0,2.0,2.0,2.0,3.0,"IPA, Pale Ale",7.0,9.0,4.0,6.0,0.5,1.0,19.0,20.0,8.0,9.0,8.0,12.0,0.0,5.0,0.3,0.9,0.1,0.4,4.0,6.0
Whitbread Golding Variety (WGV),GB,7.0,2.0,3.0,4.0,4.0,4.0,2.0,7.0,3.0,8.0,2.0,2.0,2.0,3.0,"Bitter, ESB",5.0,7.0,2.0,3.0,0.6,1.0,20.0,35.0,20.0,30.0,8.0,12.0,0.0,5.0,0.3,0.9,0.1,0.4,4.0,6.0
Sovereign,GB,7.0,2.0,3.0,4.0,4.0,4.0,2.0,7.0,3.0,8.0,2.0,2.0,2.0,3.0,"Bitter, Lager leve",4.0,6.0,2.0,3.0,0.7,1.2,20.0,35.0,20.0,30.0,8.0,12.0,0.0,5.0,0.3,0.9,0.1,0.4,4.0,6.0
Hallertau Select,DE,6.0,3.0,3.0,3.0,4.0,5.0,2.0,7.0,4.0,6.0,2.0,1.0,2.0,2.0,"Pilsner, Lager",3.0,6.0,3.0,4.5,0.7,1.2,20.0,35.0,30.0,40.0,8.0,13.0,10.0,18.0,0.4,1.2,0.1,0.4,4.5,6.5
Saphir,DE,6.0,3.0,3.0,3.0,4.0,5.0,2.0,7.0,4.0,6.0,2.0,1.0,2.0,2.0,"K√∂lsch, Lager arom√°tica",2.0,5.0,4.0,6.0,0.8,1.4,20.0,35.0,30.0,40.0,8.0,13.0,10.0,18.0,0.4,1.2,0.1,0.4,4.5,6.5
Opal,DE,6.0,3.0,3.0,3.0,4.0,5.0,2.0,7.0,4.0,6.0,2.0,1.0,2.0,2.0,"Lager, Ale",5.0,8.0,4.0,6.0,0.8,1.4,20.0,35.0,30.0,40.0,8.0,13.0,10.0,18.0,0.4,1.2,0.1,0.4,4.5,6.5
Smaragd,DE,6.0,3.0,3.0,3.0,4.0,5.0,2.0,7.0,4.0,6.0,2.0,1.0,2.0,2.0,Lager arom√°tica,4.0,7.0,4.0,6.0,0.8,1.4,20.0,35.0,30.0,40.0,8.0,13.0,10.0,18.0,0.4,1.2,0.1,0.4,4.5,6.5
Spalter Select,DE,6.0,3.0,3.0,3.0,4.0,5.0,2.0,7.0,4.0,6.0,2.0,1.0,2.0,2.0,"Pils, Kellerbier",4.0,6.0,3.0,5.0,0.7,1.2,20.0,35.0,30.0,40.0,8.0,13.0,10.0,18.0,0.4,1.2,0.1,0.4,4.5,6.5
Herkules,DE,6.0,3.0,3.0,3.0,4.0,5.0,2.0,7.0,4.0,6.0,2.0,1.0,2.0,2.0,"Bittering, IPA",12.0,17.0,4.0,5.5,1.5,2.5,20.0,35.0,30.0,40.0,8.0,13.0,10.0,18.0,0.4,1.2,0.1,0.4,4.5,6.5
Taurus,DE,6.0,3.0,3.0,3.0,4.0,5.0,2.0,7.0,4.0,6.0,2.0,1.0,2.0,2.0,"Bock, Bittering",11.0,15.0,3.5,5.0,1.5,2.5,20.0,35.0,30.0,40.0,8.0,13.0,10.0,18.0,0.4,1.2,0.1,0.4,4.5,6.5
Ariana,DE,6.0,3.0,3.0,3.0,4.0,5.0,2.0,7.0,4.0,6.0,2.0,1.0,2.0,2.0,"IPA, Lager arom√°tica",9.0,13.0,4.0,6.0,1.5,2.5,20.0,35.0,30.0,40.0,8.0,13.0,10.0,18.0,0.4,1.2,0.1,0.4,4.5,6.5
Callista,DE,6.0,3.0,3.0,3.0,4.0,5.0,2.0,7.0,4.0,6.0,2.0,1.0,2.0,2.0,"Helles, Pale Ale",6.0,10.0,4.0,6.0,1.0,1.6,20.0,35.0,30.0,40.0,8.0,13.0,10.0,18.0,0.4,1.2,0.1,0.4,4.5,6.5
Merkur,DE,6.0,3.0,3.0,3.0,4.0,5.0,2.0,7.0,4.0,6.0,2.0,1.0,2.0,2.0,"Bittering, Lager",12.0,15.0,4.0,6.0,1.5,2.5,20.0,35.0,30.0,40.0,8.0,13.0,10.0,18.0,0.4,1.2,0.1,0.4,4.5,6.5
Agnus,CZ,6.0,3.0,3.0,3.0,4.0,5.0,2.0,7.0,4.0,6.0,2.0,1.0,2.0,2.0,"Pilsner, Lager",10.0,14.0,4.0,6.0,1.0,2.0,20.0,35.0,30.0,40.0,8.0,12.0,10.0,18.0,0.4,1.1,0.1,0.4,4.5,6.5
Styrian Goldings (Celeia),SI,6.0,4.0,3.0,3.0,3.0,3.0,2.0,6.0,3.0,6.0,3.0,2.0,3.0,3.0,"Belgian Ale, Lager",3.0,6.0,3.0,5.0,0.6,1.2,25.0,40.0,20.0,30.0,8.0,12.0,5.0,12.0,0.3,0.9,0.1,0.4,4.0,6.0
Savinjski Golding,SI,6.0,4.0,3.0,3.0,3.0,3.0,2.0,6.0,3.0,6.0,3.0,2.0,3.0,3.0,"Pilsner, Belgian Ale",3.0,6.0,3.0,5.0,0.6,1.2,25.0,40.0,20.0,30.0,8.0,12.0,5.0,12.0,0.3,0.9,0.1,0.4,4.0,6.0
Aurora,SI,6.0,4.0,3.0,3.0,3.0,3.0,2.0,6.0,3.0,6.0,3.0,2.0,3.0,3.0,"Lager, Ale",7.0,9.0,3.0,5.0,0.6,1.2,25.0,40.0,20.0,30.0,8.0,12.0,5.0,12.0,0.3,0.9,0.1,0.4,4.0,6.0
Bobek,SI,6.0,4.0,3.0,3.0,3.0,3.0,2.0,6.0,3.0,6.0,3.0,2.0,3.0,3.0,"Lager, Ale",3.5,6.0,3.0,5.0,0.6,1.2,25.0,40.0,20.0,30.0,8.0,12.0,5.0,12.0,0.3,0.9,0.1,0.4,4.0,6.0
Dana,SI,6.0,4.0,3.0,3.0,3.0,3.0,2.0,6.0,3.0,6.0,3.0,2.0,3.0,3.0,"Lager, Ale",6.5,9.0,3.0,5.0,0.6,1.2,25.0,40.0,20.0,30.0,8.0,12.0,5.0,12.0,0.3,0.9,0.1,0.4,4.0,6.0
Styrian Wolf,SI,6.0,4.0,3.0,3.0,3.0,3.0,2.0,6.0,3.0,6.0,3.0,2.0,3.0,3.0,"IPA, NEIPA",14.0,18.0,4.0,6.0,1.0,2.0,25.0,40.0,20.0,30.0,8.0,12.0,5.0,12.0,0.3,0.9,0.1,0.4,4.0,6.0
Lubelski (Lublin),PL,6.0,4.0,3.0,3.0,3.0,3.0,2.0,6.0,3.0,6.0,3.0,2.0,3.0,3.0,"Pilsner, Lager",3.0,5.0,3.0,5.0,0.6,1.2,25.0,40.0,20.0,30.0,8.0,12.0,5.0,12.0,0.3,0.9,0.1,0.4,4.0,6.0
Marynka,PL,6.0,4.0,3.0,3.0,3.0,3.0,2.0,6.0,3.0,6.0,3.0,2.0,3.0,3.0,"Pilsner, Bitter",7.0,10.0,3.0,5.0,0.6,1.2,25.0,40.0,20.0,30.0,8.0,12.0,5.0,12.0,0.3,0.9,0.1,0.4,4.0,6.0
Nectaron,NZ,2.0,8.0,3.0,2.0,3.0,3.0,2.0,3.0,2.0,5.0,4.0,3.0,9.0,7.0,"NEIPA, IPA, Pale Ale, Lager",10.0,14.0,4.5,5.0,1.6,1.9,55.0,65.0,13.0,18.0,5.0,10.0,0.2,0.2,0.3,0.9,0.2,0.6,3.5,5.5
Moutere,NZ,2.0,8.0,3.0,2.0,3.0,3.0,2.0,5.0,2.0,6.0,4.0,3.0,8.0,7.0,"IPA, Pale Ale",10.0,13.0,6.0,8.0,1.5,2.5,40.0,60.0,10.0,20.0,5.0,10.0,0.0,12.0,0.3,0.9,0.2,0.6,3.5,5.5
Waimea,NZ,2.0,8.0,3.0,2.0,3.0,3.0,2.0,5.0,2.0,6.0,4.0,3.0,8.0,7.0,"IPA, Imperial IPA",16.0,19.0,7.0,9.0,1.5,2.5,40.0,60.0,10.0,20.0,5.0,10.0,0.0,12.0,0.3,0.9,0.2,0.6,3.5,5.5
Kohatu,NZ,2.0,8.0,3.0,2.0,3.0,3.0,2.0,5.0,2.0,6.0,4.0,3.0,8.0,7.0,"Pale Ale, Lager",6.0,7.0,5.0,7.0,0.8,1.5,40.0,60.0,10.0,20.0,5.0,10.0,0.0,12.0,0.3,0.9,0.2,0.6,3.5,5.5
Southern Cross,NZ,2.0,8.0,3.0,2.0,3.0,3.0,2.0,5.0,2.0,6.0,4.0,3.0,8.0,7.0,"Lager lupulada, IPA",11.0,14.0,5.5,7.0,1.0,1.6,40.0,60.0,10.0,20.0,5.0,10.0,0.0,12.0,0.3,0.9,0.2,0.6,3.5,5.5
Taiheke (NZ Cascade),NZ,2.0,8.0,3.0,2.0,3.0,3.0,2.0,5.0,2.0,6.0,4.0,3.0,8.0,7.0,"APA, Pale Ale",5.5,8.0,5.0,7.0,0.8,1.5,40.0,60.0,10.0,20.0,5.0,10.0,0.0,12.0,0.3,0.9,0.2,0.6,3.5,5.5
Pride of Ringwood,AU,3.0,8.0,3.0,2.0,4.0,3.0,2.0,6.0,3.0,5.0,4.0,3.0,3.0,7.0,"Lager, Bitter",7.0,10.5,4.0,7.0,1.2,2.0,35.0,55.0,12.0,22.0,6.0,10.0,0.0,5.0,0.3,0.9,0.2,0.6,3.5,5.5
Super Pride,AU,3.0,8.0,3.0,2.0,3.0,3.0,2.0,4.0,3.0,5.0,4.0,3.0,8.0,7.0,"Bittering, IPA",13.0,16.0,6.0,8.0,1.5,2.5,35.0,55.0,12.0,22.0,6.0,10.0,0.0,5.0,0.3,0.9,0.2,0.6,3.5,5.5
Summer,AU,3.0,8.0,3.0,2.0,3.0,3.0,2.0,4.0,3.0,5.0,4.0,3.0,8.0,7.0,"Wheat, Blonde",5.0,8.0,4.0,6.0,0.8,1.5,35.0,55.0,12.0,22.0,6.0,10.0,0.0,5.0,0.3,0.9,0.2,0.6,3.5,5.5
Melba,AU,3.0,8.0,3.0,2.0,3.0,3.0,2.0,4.0,3.0,5.0,4.0,3.0,8.0,7.0,"Pale Ale, IPA",8.0,11.0,4.0,6.0,1.0,1.8,35.0,55.0,12.0,22.0,6.0,10.0,0.0,5.0,0.3,0.9,0.2,0.6,3.5,5.5
Elixir,FR,6.0,4.0,3.0,3.0,3.0,3.0,2.0,6.0,3.0,7.0,3.0,4.0,4.0,3.0,"Belgian Ale, Saison",3.0,5.0,3.0,4.0,0.7,1.2,25.0,40.0,20.0,30.0,8.0,12.0,0.0,5.0,0.3,0.9,0.1,0.4,4.0,6.0
Triskel,FR,6.0,4.0,3.0,3.0,3.0,3.0,2.0,6.0,3.0,7.0,3.0,4.0,4.0,3.0,"Pilsner, Saison",5.0,7.0,3.0,4.0,0.7,1.2,25.0,40.0,20.0,30.0,8.0,12.0,0.0,5.0,0.3,0.9,0.1,0.4,4.0,6.0
Sorachi Ace,JP,4.0,8.0,3.0,2.0,3.0,3.0,3.0,6.0,3.0,5.0,3.0,2.0,7.0,4.0,"Saison, IPA, Witbier",10.0,14.0,6.0,7.5,1.0,3.0,44.0,55.0,20.0,26.0,7.0,11.0,2.0,5.0,0.1,0.6,0.1,0.4,3.5,5.5
African Queen,ZA,3.0,7.0,3.0,2.0,3.0,3.0,2.0,5.0,3.0,5.0,4.0,3.0,7.0,5.0,"IPA, Stout, Lager arom√°tica",12.0,16.0,4.0,6.0,1.2,2.0,40.0,55.0,12.0,20.0,6.0,10.0,0.0,5.0,0.3,0.9,0.2,0.5,3.5,5.5
Southern Passion,ZA,3.0,7.0,3.0,2.0,3.0,3.0,2.0,5.0,3.0,5.0,4.0,3.0,7.0,5.0,"Hazy IPA, Saison",9.0,12.0,4.0,6.0,1.0,1.8,40.0,55.0,12.0,20.0,6.0,10.0,0.0,5.0,0.3,0.9,0.2,0.5,3.5,5.5
Southern Star,ZA,3.0,7.0,3.0,2.0,3.0,3.0,2.0,5.0,3.0,5.0,4.0,3.0,7.0,5.0,"IPA, Bittering",14.0,16.0,4.0,6.0,1.2,2.0,40.0,55.0,12.0,20.0,6.0,10.0,0.0,5.0,0.3,0.9,0.2,0.5,3.5,5.5
Aurum,AR,4.0,6.0,3.0,3.0,3.0,3.0,2.0,5.0,3.0,5.0,4.0,3.0,6.0,5.0,"IPA, APA",5.0,7.0,3.0,5.0,0.8,1.5,35.0,55.0,15.0,25.0,6.0,10.0,0.0,5.0,0.3,0.9,0.1,0.4,3.5,5.5
Traful,AR,4.0,6.0,3.0,3.0,3.0,3.0,2.0,5.0,3.0,5.0,4.0,3.0,6.0,5.0,"Pale Ale, Lager",5.0,7.0,3.0,5.0,0.8,1.5,35.0,55.0,15.0,25.0,6.0,10.0,0.0,5.0,0.3,0.9,0.1,0.4,3.5,5.5

`;

const yeastCSV = `Levedura,Pa√≠s,Frutal,Floral,Picante,Fenol,Ester,Limpo,Cremoso,Mineral,Alco√≥lico,Acidez,Complexo,Selva,Terroso,Doce,Tipos,ABV_Tolerance,Temp_Range,Fonte
Safale US-05,US,2,2,1,1,2,9,3,2,6,1,3,1,2,2,"APA, IPA, Pale Ale","9-11%","18-26¬∞C","fermentis.com"
Safale S-04,GB,5,4,2,2,3,6,6,3,5,2,5,2,3,4,"ESB, Bitter, Mild","9-11%","18-22¬∞C","fermentis.com"
Saflager W-34/70,DE,2,1,1,1,2,9,3,4,7,1,3,1,2,2,"Lager, Pilsner","9-11%","9-22¬∞C","fermentis.com"
Wyeast 1056 American Ale,US,3,2,1,1,2,8,4,2,6,1,4,1,2,3,"APA, IPA, Amber","11%","15-24¬∞C","wyeastlab.com"
Wyeast 1968 London ESB,GB,4,5,2,2,5,5,6,3,5,3,6,2,3,5,"ESB, Bitter, Porter","9%","18-22¬∞C","wyeastlab.com"
Wyeast 2124 Bohemian Lager,CZ,2,2,2,1,3,8,4,5,6,2,4,2,2,3,"Pilsner, Lager","9%","8-14¬∞C","wyeastlab.com"
Wyeast 3787 Trappist High Gravity,BE,6,5,4,8,8,4,4,3,8,3,8,2,4,5,"Belgian Strong, Dubbel","12%","18-24¬∞C","wyeastlab.com"
Wyeast 3944 Belgian Witbier,BE,5,6,3,7,4,5,5,2,5,4,6,1,2,6,"Witbier, Hefeweizen","11%","18-24¬∞C","wyeastlab.com"
Saison Dupont (3724/565),BE,4,5,7,8,5,5,4,3,7,4,8,3,4,4,"Saison, Farmhouse","10-12%","20-30¬∞C","dupont.com"
Brettanomyces Bruxellensis,BE,3,3,2,9,3,3,3,4,8,6,9,9,8,2,"Sour, Wild Ale","14-15%","15-28¬∞C","milkthistlerecords/brett-reference"
Lactobacillus,Various,1,1,0,0,0,1,1,2,0,10,3,3,2,1,"Sour, Berliner Weisse","0%","20-40¬∞C","lallemandbrewing.com"
WLP001 California Ale,US,2,2,1,1,2,9,3,2,6,1,3,1,2,3,"APA, IPA, Cream Ale","11-12%","18-21¬∞C","whitelabs.com"
WLP002 English Ale,GB,5,5,2,2,5,5,7,3,5,2,6,2,3,6,"ESB, Porter, Stout","10%","18-20¬∞C","whitelabs.com"
WLP029 German Ale/K√∂lsch,DE,2,2,1,1,2,8,5,3,5,2,4,1,2,3,"K√∂lsch, Alt, Wheat","9-10%","18-21¬∞C","whitelabs.com"
WLP300 Hefeweizen Ale,DE,7,6,3,8,8,4,5,2,4,2,6,1,2,7,"Hefeweizen, Wheat","10%","17-22¬∞C","whitelabs.com"
WLP510 Bastogne Belgian Ale,BE,5,4,3,4,6,5,4,3,8,3,7,2,3,5,"Belgian Pale, Abbey","15%","18-24¬∞C","whitelabs.com"
WLP565 Belgian Saison I,BE,4,5,6,8,5,5,4,3,7,4,8,3,4,4,"Saison, Farmhouse","12%","20-30¬∞C","whitelabs.com"
WLP644 Saccharomyces Trois,BE,7,4,3,2,4,6,4,3,7,4,7,3,3,4,"Brett IPA, Wild Ale","12%","18-24¬∞C","whitelabs.com"
WLP775 English Cider Yeast,GB,6,3,1,1,2,7,3,2,6,3,5,1,2,5,"Cider, Perry","12%","20-24¬∞C","whitelabs.com"
EC-1118 Champagne Yeast,FR,2,2,0,0,1,9,2,3,10,1,3,1,1,1,"Mead, High ABV","18%","10-30¬∞C","lallemandbrewing.com"
SafAle WB-06,DE,6,6,2,8,7,3,4,2,5,2,6,2,3,6,"Weissbier, Wheat","9-11%","18-24¬∞C","fermentis.com"
SafAle BE-256,BE,5,4,3,6,7,4,4,3,9,3,7,2,3,5,"Belgian Strong, Abbey","9-11%","15-20¬∞C","fermentis.com"
SafAle S-33,BE,6,5,2,2,6,5,4,2,6,2,5,2,2,5,"English Ales, Pale","9-11%","15-24¬∞C","fermentis.com"
SafLager S-23,DE,3,4,1,1,3,7,4,3,7,2,4,1,2,3,"Lager, Export","9-11%","9-15¬∞C","fermentis.com"
SafAle K-97,DE,4,5,2,3,5,6,5,3,6,2,5,2,2,4,"K√∂lsch, Wheat","9-11%","12-22¬∞C","fermentis.com"
SafLager S-189,CH,2,2,1,1,2,9,4,4,7,1,3,1,2,2,"Lager, Bock","9-11%","9-22¬∞C","fermentis.com"
SafAle W-68,DE,7,6,2,8,8,3,4,2,6,2,6,2,3,6,"Weizen, Weissbier","9-11%","17-24¬∞C","fermentis.com"
SafAle BW-20,BE,5,6,2,7,6,4,4,2,6,3,6,2,3,5,"Belgian Wit","9-11%","18-24¬∞C","fermentis.com"
SafBrew BR-8,BE,3,3,2,9,3,3,3,4,8,6,9,8,8,2,"Brett Ale, Mixed","12-14%","15-28¬∞C","fermentis.com"
SafAle BE-134,BE,4,5,7,8,5,4,4,3,7,4,7,3,3,4,"Saison, Farmhouse","11%","18-28¬∞C","fermentis.com"
SafBrew DA-16,FR,3,3,2,2,5,6,3,3,10,3,6,2,3,4,"High ABV Ales","15-18%","20-32¬∞C","fermentis.com"
SafBrew LA-01,FR,1,1,0,0,1,8,2,2,1,2,3,1,1,1,"Low/No Alcohol","<1%","20-25¬∞C","fermentis.com"
SafBrew HA-18,FR,4,3,3,4,6,5,3,3,10,4,7,3,4,5,"High Gravity Ales",">15%","18-30¬∞C","fermentis.com"
WLP004 Irish Ale,IE,4,3,2,2,5,6,5,3,6,2,6,2,3,5,"Irish Red, Stout","12%","18-20¬∞C","whitelabs.com"
WLP005 British Ale,GB,5,4,2,2,5,6,6,3,6,2,6,2,3,5,"Bitter, Mild","10%","18-21¬∞C","whitelabs.com"
WLP007 Dry English Ale,GB,4,3,2,2,4,7,4,3,6,2,5,2,2,4,"Porter, Pale Ale","12%","18-21¬∞C","whitelabs.com"
WLP013 London Ale,GB,4,4,3,3,5,6,5,3,6,3,6,2,3,5,"Porter, Pale Ale","11%","18-20¬∞C","whitelabs.com"
WLP023 Burton Ale,GB,5,4,3,3,6,6,5,3,7,3,7,2,3,5,"Burton Ale, Strong","12%","18-21¬∞C","whitelabs.com"
WLP028 Edinburgh Scottish Ale,GB,4,3,3,3,5,6,5,3,6,3,6,2,3,5,"Scottish Ale","12%","18-20¬∞C","whitelabs.com"
WLP090 San Diego Super,US,3,2,1,1,2,9,3,2,6,1,3,1,2,3,"IPA, APA","12%","18-21¬∞C","whitelabs.com"
WLP099 Super High Gravity,US,3,2,2,2,4,5,3,3,10,3,6,2,3,3,"Barleywine, Extreme ABV","20%","20-30¬∞C","whitelabs.com"
SafLager NovaLager (NL-01),DK,2,2,1,1,2,9,4,3,7,1,4,1,2,2,"Lager, Pilsner, IPL","13%","10-20¬∞C","fermentis.com"
Omega Yeast Lutra Kveik (OYL-071),NO,2,1,0,0,1,9,2,2,6,1,3,1,1,2,"Kveik, Pseudo-Lager, IPA, Stout","15%","20-35¬∞C","https://omegayeast.com/yeast/kveiks/lutra-kveik"
Omega Yeast Hornindal Kveik (OYL-091),NO,9,2,1,0,6,6,3,2,7,2,7,2,1,3,"Kveik, IPA/NEIPA, Farmhouse","16%","20-35¬∞C","https://omegayeast.com/yeast/kveiks/hornindal-kveik"
Omega Yeast Voss Kveik (OYL-061),NO,7,2,1,0,4,7,3,2,6,2,5,2,1,3,"Kveik, Farmhouse, IPA","12%","22-37¬∞C","https://omegayeast.com/norwegian-kveik-strains-the-history-unique-aspects-and-our-strains"
Omega Yeast Espe Kveik (OYL-090),NO,7,3,1,0,5,6,3,2,6,2,5,2,1,3,"Kveik, IPA, Pale Ale","12%","20-35¬∞C","https://omegayeast.com/yeast/kveiks/espe-kveik"
Lallemand Nottingham Ale,GB,2,1,0,0,2,8,3,2,6,1,3,1,2,3,"Bitters, Pale Ales, Porters, Stouts","14%","10-25¬∞C","https://www.lallemandbrewing.com/en/united-states/products/nottingham-high-performance-ale-yeast/"
Lallemand Munich Classic (Wheat),DE,6,2,3,8,6,3,4,2,5,2,6,2,2,4,"Weissbier, Weizenbock, Gose","12%","17-25¬∞C","https://www.lallemandbrewing.com/en/united-states/products/munich-classic-wheat-beer-yeast/"
Lallemand Windsor,GB,6,2,2,1,6,4,6,2,5,2,5,2,3,6,"Mild, Bitter, Irish Red, Brown, Porter, Sweet Stout","12%","15-25¬∞C","https://www.lallemandbrewing.com/en/united-states/products/windsor-british-style-beer-yeast/"
Mangrove Jack's M44 US West Coast,NZ,2,1,1,0,2,8,3,2,6,1,3,1,1,2,"APA, IPA, Imperial Stout","11%","18-23¬∞C","https://mangrovejacks.com/products/m44-us-west-coast-yeast-10g; https://socalbrewingsupply.com/products/mangrove-jacks-m44-us-west-coast-ale-yeast"
Mangrove Jack's M41 Belgian Ale,NZ,7,2,3,5,8,4,3,2,7,2,7,2,2,4,"Belgian Tripel, Belgian Strong Golden/Dark","12%","18-28¬∞C","https://mangrovejacks.com/products/belgian-ale-yeast-10g; https://socalbrewingsupply.com/products/mangrove-jacks-m41-belgian-ale-yeast"
Mangrove Jack's M42 New World Strong Ale,NZ,3,1,1,0,3,7,3,2,7,1,4,1,1,3,"IPAs fortes, Porter, RIS","12%","16-22¬∞C","https://mangrovejacks.com/products/new-world-strong-ale-m42-yeast-10g; https://socalbrewingsupply.com/products/mangrove-jack-m42-new-world-strong-ale-yeast"
Lallemand Diamond Lager,DE,1,1,0,0,1,9,4,3,7,1,3,1,1,1,"Helles, Pilsner, Vienna, M√§rzen","13%","10-15¬∞C","https://www.lallemandbrewing.com/en/united-states/products/diamond-lager-yeast/"
Mangrove Jack's M54 Californian Lager,NZ,2,1,0,0,2,8,3,3,5,1,3,1,1,2,"California Common, Lagers a temp. de Ale","9%","18-20¬∞C","https://mangrovejacks.com/products/californian-lager-m54-yeast-10g; https://socalbrewingsupply.com/products/mangrove-jacks-m54-californian-lager-yeast"
Mangrove Jack's M47 Belgian Abbey,NZ,6,2,2,3,6,5,3,2,6,2,6,2,2,5,"Belgian Pale, Abbey Ales","8%","18-25¬∞C","https://mangrovejacks.com/products/belgian-abbey-m47-yeast-10g; https://www.brewolution.com/ingredients/yeast/belgian-abbey-ale-m47-yeast-10-g.html"
Mangrove Jack's M21 Belgian Wit,NZ,6,2,4,6,5,4,2,2,5,3,5,2,2,4,"Witbier, Spiced Ale","8%","18-25¬∞C","https://mangrovejacks.com/products/belgian-wit-m21-yeast-10g; https://socalbrewingsupply.com/products/mangrove-jacks-m21-belgian-wit-yeast"
Omega Yeast Saisonstein‚Äôs Monster (OYL-500),US,5,2,5,7,6,4,3,2,7,4,7,2,2,3,"Saison, Farmhouse, Grisette, Bi√®re de Garde","12%","18-26¬∞C","https://omegayeast.com/yeast/belgian-ales/saisonstein; https://omegayeast.com/uploads/downloads/2024-Omega-Yeast-Homebrew-Strain-Poster.pdf"
`;

/* =====================  Utilidades  ===================== */
// Mapa de pa√≠ses para c√≥digos ISO dos flags
const COUNTRY_FLAGS = {
  'US': 'us', 'EUA': 'us',
  'DE': 'de',
  'GB': 'gb',
  'CZ': 'cz',
  'NZ': 'nz',
  'AU': 'au',
  'FR': 'fr',
  'ES': 'es',
  'AR/CH': 'ar', // Argentina para o h√≠brido AR/CH
  'AR': 'ar',
  'CH': 'cl'
};

function getFlagUrl(countryCode) {
  const isoCode = COUNTRY_FLAGS[countryCode] || countryCode.toLowerCase();
  return `https://flagcdn.com/16x12/${isoCode}.png`;
}

function createFlagElement(countryCode) {
  if (!countryCode) return '';
  const flagUrl = getFlagUrl(countryCode);
  return `<span class="flag" style="background-image:url('${flagUrl}')" title="${countryCode}"></span>`;
}
const ATTRS = ["Ch√°","C√≠trico","Verde","Caramelado","Amadeirado","Picante","Mentolado","Herbal","Vegetal","Floral","Fruta Verde","Fruta Vermelha","Fruta Amarela","Fruta Doce"];

// Mapeamento de √≠cones para cada caracter√≠stica
const ATTR_ICONS = {
  "Ch√°": "‚òï",
  "C√≠trico": "üçã", 
  "Verde": "üåø",
  "Caramelado": "üçØ",
  "Amadeirado": "üå≥",
  "Picante": "üå∂Ô∏è",
  "Mentolado": "‚ùÑÔ∏è",
  "Herbal": "üå±",
  "Vegetal": "ü•¨",
  "Floral": "üå∏",
  "Fruta Verde": "üçè",
  "Fruta Vermelha": "üçì",
  "Fruta Amarela": "üçå",
  "Fruta Doce": "üçë"
};

// Vers√µes com √≠cones dos atributos
const ATTRS_WITH_ICONS = ATTRS.map(attr => `${ATTR_ICONS[attr]} ${attr}`);

// Yeast attributes
const YEAST_ATTRS = ["Frutal","Floral","Picante","Fenol","Ester","Limpo","Cremoso","Mineral","Alco√≥lico","Acidez","Complexo","Selva","Terroso","Doce"];

// Mapeamento de √≠cones para caracter√≠sticas de levedura
const YEAST_ATTR_ICONS = {
  "Frutal": "üçé",
  "Floral": "üå∏",
  "Picante": "üå∂Ô∏è",
  "Fenol": "‚öóÔ∏è",
  "Ester": "üß™",
  "Limpo": "‚ú®",
  "Cremoso": "ü•õ",
  "Mineral": "‚õ∞Ô∏è",
  "Alco√≥lico": "üç∫",
  "Acidez": "üçã",
  "Complexo": "üß©",
  "Selva": "üåø",
  "Terroso": "üåç",
  "Doce": "üçØ"
};

// Vers√µes com √≠cones dos atributos de levedura
const YEAST_ATTRS_WITH_ICONS = YEAST_ATTRS.map(attr => `${YEAST_ATTR_ICONS[attr]} ${attr}`);
function parseCSV(text){
  // parse simples, suficiente para este CSV (aspas apenas em Estilos)
  const lines = text.trim().split(/\r?\n/);
  const headers = lines.shift().split(",");
  return lines.map(line=>{
    // separa por v√≠rgula, respeitando campo final possivelmente com v√≠rgulas dentro de aspas
    const parts = [];
    let cur = "", inQuotes=false;
    for (let i=0;i<line.length;i++){
      const ch=line[i];
      if(ch === '"' ){ inQuotes = !inQuotes; continue; }
      if(ch === ',' && !inQuotes){ parts.push(cur); cur=""; }
      else cur += ch;
    }
    parts.push(cur);
    const obj = {};
    headers.forEach((h,idx)=> obj[h.trim()] = parts[idx]?.trim() ?? "");
    // n√∫meros para atributos
    ATTRS.forEach(a=> obj[a] = Number(obj[a]));
    // estilos em array
    obj.Estilos = (obj.Estilos||"").split(",").map(s=>s.trim()).filter(Boolean);
    // normaliza campos nome/pa√≠s
    obj.nome = obj["L√∫pulo"];
    obj.pais = obj["Pa√≠s"];
    return obj;
  });
}

function parseYeastCSV(text){
  // parse simples, suficiente para este CSV (aspas apenas em Tipos)
  const lines = text.trim().split(/\r?\n/);
  const headers = lines.shift().split(",");
  return lines.map(line=>{
    // separa por v√≠rgula, respeitando campo final possivelmente com v√≠rgulas dentro de aspas
    const parts = [];
    let cur = "", inQuotes=false;
    for (let i=0;i<line.length;i++){
      const ch=line[i];
      if(ch === '"' ){ inQuotes = !inQuotes; continue; }
      if(ch === ',' && !inQuotes){ parts.push(cur); cur=""; }
      else cur += ch;
    }
    parts.push(cur);
    const obj = {};
    headers.forEach((h,idx)=> obj[h.trim()] = parts[idx]?.trim() ?? "");
    // n√∫meros para atributos
    YEAST_ATTRS.forEach(a=> obj[a] = Number(obj[a]));
    // tipos em array
    obj.Tipos = (obj.Tipos||"").split(",").map(s=>s.trim()).filter(Boolean);
    // normaliza campos nome/pa√≠s
    obj.nome = obj["Levedura"];
    obj.pais = obj["Pa√≠s"];
    return obj;
  });
}

const DATA = parseCSV(csv);
const YEAST_DATA = parseYeastCSV(yeastCSV);

// mapas para lookup r√°pido
const byName = new Map(DATA.map(d=>[d.nome, d]));
const yeastByName = new Map(YEAST_DATA.map(d=>[d.nome, d]));

/* =====================  DOM  ===================== */
const leftSel  = document.getElementById('leftSel');
const rightSel = document.getElementById('rightSel');
const qInput   = document.getElementById('q');
const q2Input  = document.getElementById('q2');
const leftMeta = document.getElementById('leftMeta');
const rightMeta= document.getElementById('rightMeta');
const leftPill = document.getElementById('leftPill');
const rightPill = document.getElementById('rightPill');
const leftLegend = document.getElementById('leftLegend');
const rightLegend = document.getElementById('rightLegend');
const leftLegendChem = document.getElementById('leftLegendChem');
const rightLegendChem = document.getElementById('rightLegendChem');
const leftLegendCompounds = document.getElementById('leftLegendCompounds');
const rightLegendCompounds = document.getElementById('rightLegendCompounds');

// Yeast DOM elements
const leftSelYeast  = document.getElementById('leftSelYeast');
const rightSelYeast = document.getElementById('rightSelYeast');
const qInputYeast   = document.getElementById('qYeast');
const q2InputYeast  = document.getElementById('q2Yeast');
const leftMetaYeast = document.getElementById('leftMetaYeast');
const rightMetaYeast= document.getElementById('rightMetaYeast');
const leftPillYeast = document.getElementById('leftPillYeast');
const rightPillYeast = document.getElementById('rightPillYeast');
const leftLegendYeast = document.getElementById('leftLegendYeast');
const rightLegendYeast = document.getElementById('rightLegendYeast');
const leftLegendYeastSpecs = document.getElementById('leftLegendYeastSpecs');
const rightLegendYeastSpecs = document.getElementById('rightLegendYeastSpecs');

function formatStyles(arr){ return arr.map(s=>`<span class="tag">${s}</span>`).join(" "); }
function renderMeta(side, hop){
  const t = TRANSLATIONS[currentLang];
  const html = hop ? `
    <div><b>${t.hop_name}</b> ${hop.nome}</div>
    <div><b>${t.hop_country}</b> ${hop.pais}${createFlagElement(hop.pais)}</div>
    <div><b>${t.hop_styles}</b><div class="styles">${formatStyles(hop.Estilos)}</div></div>
  ` : `<div style="color:#7f89b4">${t.select_hop}</div>`;
  (side==='left'?leftMeta:rightMeta).innerHTML = html;
}

let leftOptionsList = [...DATA];
let rightOptionsList = [...DATA];

/* popula selects */
function fillLeftSelect(list){
  const t = TRANSLATIONS[currentLang];
  const opts = list.map(d=>`<option value="${d.nome}">${d.nome} (${d.pais})</option>`).join("");
  leftSel.innerHTML  = `<option value="">${t.select_left}</option>` + opts;
}

function fillRightSelect(list){
  const t = TRANSLATIONS[currentLang];
  const opts = list.map(d=>`<option value="${d.nome}">${d.nome} (${d.pais})</option>`).join("");
  rightSel.innerHTML = `<option value="">${t.select_right}</option>` + opts;
}

function fillSelects(list){
  fillLeftSelect(list);
  fillRightSelect(list);
}

// Yeast functions
function renderYeastMeta(side, yeast){
  const t = TRANSLATIONS[currentLang];
  const html = yeast ? `
    <div><b>${t.yeast_name}</b> ${yeast.nome}</div>
    <div><b>${t.yeast_country}</b> ${yeast.pais}${createFlagElement(yeast.pais)}</div>
    <div><b>${t.yeast_types}</b><div class="styles">${formatStyles(yeast.Tipos)}</div></div>
    <div><b>${t.yeast_abv}</b> ${yeast.ABV_Tolerance}</div>
    <div><b>${t.yeast_temp}</b> ${yeast.Temp_Range}</div>
    <div><b>${t.yeast_source}</b> ${yeast.Fonte}</div>
  ` : `<div style="color:#7f89b4">${t.select_yeast}</div>`;
  (side==='left'?leftMetaYeast:rightMetaYeast).innerHTML = html;
}

let leftYeastOptionsList = [...YEAST_DATA];
let rightYeastOptionsList = [...YEAST_DATA];

function fillLeftSelectYeast(list){
  const t = TRANSLATIONS[currentLang];
  const opts = list.map(d=>`<option value="${d.nome}">${d.nome} (${d.pais})</option>`).join("");
  leftSelYeast.innerHTML  = `<option value="">${t.select_left_yeast}</option>` + opts;
}

function fillRightSelectYeast(list){
  const t = TRANSLATIONS[currentLang];
  const opts = list.map(d=>`<option value="${d.nome}">${d.nome} (${d.pais})</option>`).join("");
  rightSelYeast.innerHTML = `<option value="">${t.select_right_yeast}</option>` + opts;
}

function fillYeastSelects(list){
  fillLeftSelectYeast(list);
  fillRightSelectYeast(list);
}

function applyLeftYeastFilter(){
  const q = qInputYeast.value.trim().toLowerCase();
  if(!q){ leftYeastOptionsList = [...YEAST_DATA]; fillLeftSelectYeast(leftYeastOptionsList); return; }
  leftYeastOptionsList = YEAST_DATA.filter(d=>{
    const hay = [d.nome, d.pais, ...(d.Tipos||[])].join(" ").toLowerCase();
    return hay.includes(q);
  });
  fillLeftSelectYeast(leftYeastOptionsList);
}

function applyRightYeastFilter(){
  const q = q2InputYeast.value.trim().toLowerCase();
  if(!q){ rightYeastOptionsList = [...YEAST_DATA]; fillRightSelectYeast(rightYeastOptionsList); return; }
  rightYeastOptionsList = YEAST_DATA.filter(d=>{
    const hay = [d.nome, d.pais, ...(d.Tipos||[])].join(" ").toLowerCase();
    return hay.includes(q);
  });
  fillRightSelectYeast(rightYeastOptionsList);
}

/* filtro de busca esquerdo */
function applyLeftFilter(){
  const q = qInput.value.trim().toLowerCase();
  if(!q){ leftOptionsList = [...DATA]; fillLeftSelect(leftOptionsList); return; }
  leftOptionsList = DATA.filter(d=>{
    const hay = [d.nome, d.pais, ...(d.Estilos||[])].join(" ").toLowerCase();
    return hay.includes(q);
  });
  fillLeftSelect(leftOptionsList);
}

/* filtro de busca direito */
function applyRightFilter(){
  const q = q2Input.value.trim().toLowerCase();
  if(!q){ rightOptionsList = [...DATA]; fillRightSelect(rightOptionsList); return; }
  rightOptionsList = DATA.filter(d=>{
    const hay = [d.nome, d.pais, ...(d.Estilos||[])].join(" ").toLowerCase();
    return hay.includes(q);
  });
  fillRightSelect(rightOptionsList);
}

qInput.addEventListener('input', applyLeftFilter);
q2Input.addEventListener('input', applyRightFilter);

// Yeast filter event listeners
qInputYeast.addEventListener('input', applyLeftYeastFilter);
q2InputYeast.addEventListener('input', applyRightYeastFilter);

/* =====================  CHART (Radar)  ===================== */
const ctx = document.getElementById('radar').getContext('2d');

const gridColor = getComputedStyle(document.documentElement).getPropertyValue('--ring').trim() || '#2a335a';

const radar = new Chart(ctx, {
  type: 'radar',
  data: {
    labels: ATTRS_WITH_ICONS,
    datasets: [
      {
        label: '',
        data: [], // preenchido ao selecionar
        backgroundColor: 'rgba(76,141,246,0.22)',
        borderColor: 'rgba(76,141,246,1)',
        pointBackgroundColor: 'rgba(76,141,246,1)',
        pointRadius: 3,
        borderWidth: 2,
        order: 1
      },
      {
        label: '',
        data: [],
        backgroundColor: 'rgba(230,91,183,0.22)',
        borderColor: 'rgba(230,91,183,1)',
        pointBackgroundColor: 'rgba(230,91,183,1)',
        pointRadius: 3,
        borderWidth: 2,
        order: 2
      }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      r: {
        min: 0, max: 10, ticks: { stepSize: 2, showLabelBackdrop:false, color:'#aeb7da' },
        grid: { color: gridColor },
        angleLines: { color: gridColor },
        pointLabels: {
          color: '#dfe6ff',
          font: { size: 11, weight: 500, family: 'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Apple Color Emoji", "Segoe UI Emoji", sans-serif' }
        }
      }
    },
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          title: (ctx)=> ctx[0].label,
          label: (ctx)=> `${ctx.dataset.label}: ${ctx.formattedValue}`
        }
      }
    },
    elements: {
      line: { tension: 0.25 }
    },
    animation: { duration: 350 }
  }
});

/* =====================  CHEMICAL CHART (Bar)  ===================== */
const chemCtx = document.getElementById('chemicalChart').getContext('2d');

const chemicalChart = new Chart(chemCtx, {
  type: 'bar',
  data: {
    labels: ['√Åcidos Alfa (%)', '√Åcidos Beta (%)', '√ìleos Essenciais (ml/100g)'],
    datasets: [
      {
        label: '',
        data: [0, 0, 0],
        backgroundColor: 'rgba(76,141,246,0.7)',
        borderColor: 'rgba(76,141,246,1)',
        borderWidth: 2,
        maxBarThickness: 60
      },
      {
        label: '',
        data: [0, 0, 0],
        backgroundColor: 'rgba(230,91,183,0.7)',
        borderColor: 'rgba(230,91,183,1)',
        borderWidth: 2,
        maxBarThickness: 60
      }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      x: {
        ticks: { color: '#dfe6ff', font: { size: 11 } },
        grid: { color: gridColor }
      },
      y: {
        ticks: { color: '#aeb7da', font: { size: 11 } },
        grid: { color: gridColor },
        beginAtZero: true
      }
    },
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          title: (ctx) => ctx[0].label,
          label: (ctx) => {
            const unit = ctx.label.includes('ml/100g') ? ' ml/100g' : '%';
            return `${ctx.dataset.label}: ${ctx.formattedValue}${unit}`;
          }
        }
      }
    },
    animation: { duration: 350 }
  }
});

/* =====================  COMPOUNDS CHART (Bar)  ===================== */
const compoundsCtx = document.getElementById('compoundsChart').getContext('2d');

const compoundsChart = new Chart(compoundsCtx, {
  type: 'bar',
  data: {
    labels: ['Mirceno (%)', 'Humuleno (%)', 'Cariofileno (%)', 'Farneseno (%)', 'Linalol (%)', 'Geraniol (%)', 'Polifen√≥is (%)'],
    datasets: [
      {
        label: '',
        data: [0, 0, 0, 0, 0, 0, 0],
        backgroundColor: 'rgba(76,141,246,0.7)',
        borderColor: 'rgba(76,141,246,1)',
        borderWidth: 2,
        maxBarThickness: 60
      },
      {
        label: '',
        data: [0, 0, 0, 0, 0, 0, 0],
        backgroundColor: 'rgba(230,91,183,0.7)',
        borderColor: 'rgba(230,91,183,1)',
        borderWidth: 2,
        maxBarThickness: 60
      }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      x: {
        ticks: { color: '#dfe6ff', font: { size: 11 } },
        grid: { color: gridColor }
      },
      y: {
        ticks: { color: '#aeb7da', font: { size: 11 } },
        grid: { color: gridColor },
        beginAtZero: true
      }
    },
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          title: (ctx) => ctx[0].label,
          label: (ctx) => `${ctx.dataset.label}: ${ctx.formattedValue}%`
        }
      }
    },
    animation: { duration: 350 }
  }
});

/* =====================  YEAST CHARTS  ===================== */
const yeastCtx = document.getElementById('yeastRadar').getContext('2d');

const yeastRadar = new Chart(yeastCtx, {
  type: 'radar',
  data: {
    labels: YEAST_ATTRS_WITH_ICONS,
    datasets: [
      {
        label: '',
        data: [], // preenchido ao selecionar
        backgroundColor: 'rgba(76,141,246,0.22)',
        borderColor: 'rgba(76,141,246,1)',
        pointBackgroundColor: 'rgba(76,141,246,1)',
        pointRadius: 3,
        borderWidth: 2,
        order: 1
      },
      {
        label: '',
        data: [],
        backgroundColor: 'rgba(230,91,183,0.22)',
        borderColor: 'rgba(230,91,183,1)',
        pointBackgroundColor: 'rgba(230,91,183,1)',
        pointRadius: 3,
        borderWidth: 2,
        order: 2
      }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      r: {
        min: 0, max: 10, ticks: { stepSize: 2, showLabelBackdrop:false, color:'#aeb7da' },
        grid: { color: gridColor },
        angleLines: { color: gridColor },
        pointLabels: {
          color: '#dfe6ff',
          font: { size: 11, weight: 500, family: 'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Apple Color Emoji", "Segoe UI Emoji", sans-serif' }
        }
      }
    },
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          title: (ctx)=> ctx[0].label,
          label: (ctx)=> `${ctx.dataset.label}: ${ctx.formattedValue}`
        }
      }
    },
    elements: {
      line: { tension: 0.25 }
    },
    animation: { duration: 350 }
  }
});

/* =====================  YEAST SPECS CHART (Bar)  ===================== */
const yeastSpecsCtx = document.getElementById('yeastSpecsChart').getContext('2d');

const yeastSpecsChart = new Chart(yeastSpecsCtx, {
  type: 'bar',
  data: {
    labels: ['Toler√¢ncia ABV (%)', 'Temp. M√≠nima (¬∞C)', 'Temp. M√°xima (¬∞C)'],
    datasets: [
      {
        label: '',
        data: [0, 0, 0],
        backgroundColor: 'rgba(76,141,246,0.7)',
        borderColor: 'rgba(76,141,246,1)',
        borderWidth: 2,
        maxBarThickness: 60
      },
      {
        label: '',
        data: [0, 0, 0],
        backgroundColor: 'rgba(230,91,183,0.7)',
        borderColor: 'rgba(230,91,183,1)',
        borderWidth: 2,
        maxBarThickness: 60
      }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      x: {
        ticks: { color: '#dfe6ff', font: { size: 11 } },
        grid: { color: gridColor }
      },
      y: {
        ticks: { color: '#aeb7da', font: { size: 11 } },
        grid: { color: gridColor },
        beginAtZero: true
      }
    },
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          title: (ctx) => ctx[0].label,
          label: (ctx) => {
            const value = ctx.formattedValue;
            const unit = ctx.label.includes('¬∞C') ? '¬∞C' : '%';
            return `${ctx.dataset.label}: ${value}${unit}`;
          }
        }
      }
    },
    animation: { duration: 350 }
  }
});

/* helpers para extrair vetor de atributos */
function vector(hop){
  return ATTRS.map(a => hop[a] ?? 0);
}

/* helpers para extrair dados qu√≠micos */
function getChemicalData(hop) {
  if (!hop) return [0, 0, 0];
  
  const alphaMin = parseFloat(hop['AA_min_%']) || 0;
  const alphaMax = parseFloat(hop['AA_max_%']) || 0;
  const betaMin = parseFloat(hop['BA_min_%']) || 0;
  const betaMax = parseFloat(hop['BA_max_%']) || 0;
  const oilsMin = parseFloat(hop.Oils_min_ml_100g) || 0;
  const oilsMax = parseFloat(hop.Oils_max_ml_100g) || 0;
  
  // Usar a m√©dia dos valores min/max
  const alpha = alphaMin && alphaMax ? (alphaMin + alphaMax) / 2 : (alphaMin || alphaMax || 0);
  const beta = betaMin && betaMax ? (betaMin + betaMax) / 2 : (betaMin || betaMax || 0);
  const oils = oilsMin && oilsMax ? (oilsMin + oilsMax) / 2 : (oilsMin || oilsMax || 0);
  
  return [alpha, beta, oils];
}

/* helpers para extrair dados dos compostos */
function getCompoundsData(hop) {
  if (!hop) return [0, 0, 0, 0, 0, 0, 0];
  
  const myrceneMin = parseFloat(hop['Myrcene_min_%']) || 0;
  const myrceneMax = parseFloat(hop['Myrcene_max_%']) || 0;
  const humuleneMin = parseFloat(hop['Humulene_min_%']) || 0;
  const humuleneMax = parseFloat(hop['Humulene_max_%']) || 0;
  const caryophylleneMin = parseFloat(hop['Caryophyllene_min_%']) || 0;
  const caryophylleneMax = parseFloat(hop['Caryophyllene_max_%']) || 0;
  const farneseneMin = parseFloat(hop['Farnesene_min_%']) || 0;
  const farneseneMax = parseFloat(hop['Farnesene_max_%']) || 0;
  const linaloolMin = parseFloat(hop['Linalool_min_%']) || 0;
  const linaloolMax = parseFloat(hop['Linalool_max_%']) || 0;
  const geraniolMin = parseFloat(hop['Geraniol_min_%']) || 0;
  const geraniolMax = parseFloat(hop['Geraniol_max_%']) || 0;
  const polyphenolsMin = parseFloat(hop['Polyphenols_min_%']) || 0;
  const polyphenolsMax = parseFloat(hop['Polyphenols_max_%']) || 0;
  
  // Usar a m√©dia dos valores min/max
  const myrcene = myrceneMin && myrceneMax ? (myrceneMin + myrceneMax) / 2 : (myrceneMin || myrceneMax || 0);
  const humulene = humuleneMin && humuleneMax ? (humuleneMin + humuleneMax) / 2 : (humuleneMin || humuleneMax || 0);
  const caryophyllene = caryophylleneMin && caryophylleneMax ? (caryophylleneMin + caryophylleneMax) / 2 : (caryophylleneMin || caryophylleneMax || 0);
  const farnesene = farneseneMin && farneseneMax ? (farneseneMin + farneseneMax) / 2 : (farneseneMin || farneseneMax || 0);
  const linalool = linaloolMin && linaloolMax ? (linaloolMin + linaloolMax) / 2 : (linaloolMin || linaloolMax || 0);
  const geraniol = geraniolMin && geraniolMax ? (geraniolMin + geraniolMax) / 2 : (geraniolMin || geraniolMax || 0);
  const polyphenols = polyphenolsMin && polyphenolsMax ? (polyphenolsMin + polyphenolsMax) / 2 : (polyphenolsMin || polyphenolsMax || 0);
  
  return [myrcene, humulene, caryophyllene, farnesene, linalool, geraniol, polyphenols];
}

/* helpers para extrair vetor de atributos de levedura */
function yeastVector(yeast){
  return YEAST_ATTRS.map(a => yeast[a] ?? 0);
}

/* helpers para extrair dados de especifica√ß√µes de levedura */
function getYeastSpecsData(yeast) {
  if (!yeast) return [0, 0, 0];
  
  // Parse ABV tolerance
  let abv = 0;
  if (yeast.ABV_Tolerance) {
    const abvStr = yeast.ABV_Tolerance.replace('%', '');
    if (abvStr.includes('-')) {
      const [min, max] = abvStr.split('-').map(s => parseFloat(s.trim()));
      abv = (min + max) / 2;
    } else if (abvStr.startsWith('<')) {
      abv = parseFloat(abvStr.substring(1));
    } else if (abvStr.startsWith('>')) {
      abv = parseFloat(abvStr.substring(1));
    } else {
      abv = parseFloat(abvStr);
    }
  }
  
  // Parse temperature range
  let tempMin = 0, tempMax = 0;
  if (yeast.Temp_Range) {
    const tempStr = yeast.Temp_Range.replace(/¬∞C/g, '');
    if (tempStr.includes('-')) {
      const [min, max] = tempStr.split('-').map(s => parseFloat(s.trim()));
      tempMin = min || 0;
      tempMax = max || 0;
    }
  }
  
  return [abv, tempMin, tempMax];
}

/* atualiza gr√°fico e metadados */
function update(){
  const leftName  = leftSel.value;
  const rightName = rightSel.value;

  const left  = byName.get(leftName);
  const right = byName.get(rightName);

  // Atualizar os dados do gr√°fico radar
  radar.data.datasets[0].data = left  ? vector(left)  : [];
  radar.data.datasets[1].data = right ? vector(right) : [];

  // Atualizar os labels dos datasets do radar com os nomes dos l√∫pulos
  radar.data.datasets[0].label = left ? left.nome : '';
  radar.data.datasets[1].label = right ? right.nome : '';

  // Atualizar os dados do gr√°fico qu√≠mico
  chemicalChart.data.datasets[0].data = left ? getChemicalData(left) : [0, 0, 0];
  chemicalChart.data.datasets[1].data = right ? getChemicalData(right) : [0, 0, 0];
  
  // Atualizar os labels dos datasets do gr√°fico qu√≠mico
  chemicalChart.data.datasets[0].label = left ? left.nome : '';
  chemicalChart.data.datasets[1].label = right ? right.nome : '';

  // Atualizar os dados do gr√°fico de compostos
  compoundsChart.data.datasets[0].data = left ? getCompoundsData(left) : [0, 0, 0, 0, 0, 0, 0];
  compoundsChart.data.datasets[1].data = right ? getCompoundsData(right) : [0, 0, 0, 0, 0, 0, 0];
  
  // Atualizar os labels dos datasets do gr√°fico de compostos
  compoundsChart.data.datasets[0].label = left ? left.nome : '';
  compoundsChart.data.datasets[1].label = right ? right.nome : '';

  // Atualizar pills com os nomes dos l√∫pulos
  const t = TRANSLATIONS[currentLang];
  leftPill.textContent = left ? left.nome : t.left_pill;
  rightPill.textContent = right ? right.nome : t.right_pill;

  // Atualizar legendas do gr√°fico radar com os nomes dos l√∫pulos ou texto padr√£o
  leftLegend.textContent = left ? left.nome : t.legend_left;
  rightLegend.textContent = right ? right.nome : t.legend_right;

  // Atualizar legendas do gr√°fico qu√≠mico com os nomes dos l√∫pulos ou texto padr√£o
  leftLegendChem.textContent = left ? left.nome : t.legend_left;
  rightLegendChem.textContent = right ? right.nome : t.legend_right;

  // Atualizar legendas do gr√°fico de compostos com os nomes dos l√∫pulos ou texto padr√£o
  leftLegendCompounds.textContent = left ? left.nome : t.legend_left;
  rightLegendCompounds.textContent = right ? right.nome : t.legend_right;

  renderMeta('left', left);
  renderMeta('right', right);

  radar.update();
  chemicalChart.update();
  compoundsChart.update();
}

/* atualiza gr√°fico e metadados de leveduras */
function updateYeast(){
  const leftName  = leftSelYeast.value;
  const rightName = rightSelYeast.value;

  const left  = yeastByName.get(leftName);
  const right = yeastByName.get(rightName);

  // Atualizar os dados do gr√°fico radar de levedura
  yeastRadar.data.datasets[0].data = left  ? yeastVector(left)  : [];
  yeastRadar.data.datasets[1].data = right ? yeastVector(right) : [];

  // Atualizar os labels dos datasets do radar com os nomes das leveduras
  yeastRadar.data.datasets[0].label = left ? left.nome : '';
  yeastRadar.data.datasets[1].label = right ? right.nome : '';

  // Atualizar os dados do gr√°fico de especifica√ß√µes de levedura
  yeastSpecsChart.data.datasets[0].data = left ? getYeastSpecsData(left) : [0, 0, 0];
  yeastSpecsChart.data.datasets[1].data = right ? getYeastSpecsData(right) : [0, 0, 0];
  
  // Atualizar os labels dos datasets do gr√°fico de especifica√ß√µes
  yeastSpecsChart.data.datasets[0].label = left ? left.nome : '';
  yeastSpecsChart.data.datasets[1].label = right ? right.nome : '';

  // Atualizar pills com os nomes das leveduras
  const t = TRANSLATIONS[currentLang];
  leftPillYeast.textContent = left ? left.nome : t.left_pill;
  rightPillYeast.textContent = right ? right.nome : t.right_pill;

  // Atualizar legendas do gr√°fico radar com os nomes das leveduras ou texto padr√£o
  leftLegendYeast.textContent = left ? left.nome : t.legend_left;
  rightLegendYeast.textContent = right ? right.nome : t.legend_right;

  // Atualizar legendas do gr√°fico de especifica√ß√µes com os nomes das leveduras ou texto padr√£o
  leftLegendYeastSpecs.textContent = left ? left.nome : t.legend_left;
  rightLegendYeastSpecs.textContent = right ? right.nome : t.legend_right;

  renderYeastMeta('left', left);
  renderYeastMeta('right', right);

  yeastRadar.update();
  yeastSpecsChart.update();
}

/* =====================  INTERNACIONALIZA√á√ÉO - FUN√á√ïES  ===================== */
function updateTexts() {
  const t = TRANSLATIONS[currentLang];
  
  // Preserva as sele√ß√µes atuais - Hop
  const currentLeftSelection = leftSel.value;
  const currentRightSelection = rightSel.value;
  
  // Preserva as sele√ß√µes atuais - Yeast
  const currentLeftYeastSelection = leftSelYeast.value;
  const currentRightYeastSelection = rightSelYeast.value;
  
  // Atualiza todos os elementos com data-i18n
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (t[key]) {
      el.innerHTML = t[key];
    }
  });
  
  // Atualiza placeholders
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    const key = el.getAttribute('data-i18n-placeholder');
    if (t[key]) {
      el.placeholder = t[key];
    }
  });
  
  // Recarrega selects e metadados hop, preservando filtros atuais
  fillLeftSelect(leftOptionsList);
  fillRightSelect(rightOptionsList);
  
  // Recarrega selects e metadados yeast, preservando filtros atuais
  fillLeftSelectYeast(leftYeastOptionsList);
  fillRightSelectYeast(rightYeastOptionsList);
  
  // Restaura as sele√ß√µes - Hop
  leftSel.value = currentLeftSelection;
  rightSel.value = currentRightSelection;
  
  // Restaura as sele√ß√µes - Yeast
  leftSelYeast.value = currentLeftYeastSelection;
  rightSelYeast.value = currentRightYeastSelection;
  
  // Atualizar labels dos gr√°ficos
  updateChartLabels();
  
  // Update current tool
  if (currentTool === 'hop') {
    update();
  } else if (currentTool === 'yeast') {
    updateYeast();
  }
}

function updateChartLabels() {
  const t = TRANSLATIONS[currentLang];
  
  // Atualizar labels do radar de l√∫pulos com √≠cones
  const aromaLabelsWithIcons = t.aroma_labels.map((label, index) => `${Object.values(ATTR_ICONS)[index]} ${label}`);
  radar.data.labels = aromaLabelsWithIcons;
  
  // Atualizar labels do gr√°fico qu√≠mico
  chemicalChart.data.labels = t.chemical_labels;
  
  // Atualizar labels do gr√°fico de compostos
  compoundsChart.data.labels = t.compounds_labels;
  
  // Atualizar labels do radar de leveduras com √≠cones
  const yeastLabelsWithIcons = t.yeast_aroma_labels.map((label, index) => `${Object.values(YEAST_ATTR_ICONS)[index]} ${label}`);
  yeastRadar.data.labels = yeastLabelsWithIcons;
  
  // Atualizar labels do gr√°fico de especifica√ß√µes de levedura
  yeastSpecsChart.data.labels = t.yeast_specs_labels;
  
  // Atualizar os gr√°ficos para refletir as mudan√ßas
  radar.update();
  chemicalChart.update();
  compoundsChart.update();
  yeastRadar.update();
  yeastSpecsChart.update();
}

function switchLanguage(lang) {
  currentLang = lang;
  localStorage.setItem('hop-radar-lang', lang);
  
  // Atualiza bot√µes ativos
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.classList.toggle('active', btn.dataset.lang === lang);
  });
  
  updateTexts();
}

/* =====================  SISTEMA DE MENU PRINCIPAL  ===================== */
let currentTool = 'hop'; // Default tool

function switchTool(toolName) {
  currentTool = toolName;
  
  // Atualizar bot√µes do menu principal
  document.querySelectorAll('.menu-btn').forEach(btn => {
    btn.classList.toggle('active', btn.dataset.tool === toolName);
  });
  
  // Atualizar se√ß√µes das ferramentas
  document.querySelectorAll('.tool-section').forEach(section => {
    section.classList.toggle('active', section.id === `${toolName}-tool`);
  });
  
  
  // Reset tabs to first tab when switching tools
  if (toolName === 'hop') {
    switchTab('aroma');
  } else if (toolName === 'yeast') {
    switchYeastTab('yeast-aroma');
  }
}

/* =====================  SISTEMA DE ABAS  ===================== */
function switchTab(tabName) {
  // Atualizar bot√µes das abas
  document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.classList.toggle('active', btn.dataset.tab === tabName);
  });
  
  // Atualizar conte√∫do das abas
  document.querySelectorAll('.tab-content').forEach(content => {
    content.classList.toggle('active', content.id === `${tabName}-content`);
  });
}

function switchYeastTab(tabName) {
  // Atualizar bot√µes das abas de levedura
  document.querySelectorAll('#yeast-tool .tab-btn').forEach(btn => {
    btn.classList.toggle('active', btn.dataset.tab === tabName);
  });
  
  // Atualizar conte√∫do das abas de levedura
  document.querySelectorAll('#yeast-tool .tab-content').forEach(content => {
    content.classList.toggle('active', content.id === `${tabName}-content`);
  });
}

/* =====================  CONVERSOR DE DENSIDADE  ===================== */
function convertValues(inputType, inputValue) {
  const value = parseFloat(inputValue);
  if (isNaN(value) || value < 0) {
    return { plato: '‚Äî', gravity: '‚Äî' };
  }

  let platoValue, gravityValue;
  
  if (inputType === 'plato') {
    platoValue = value;
    gravityValue = 1 + (value * 0.004037);
  } else { // gravity
    gravityValue = value;
    platoValue = (value - 1) / 0.004037;
  }

  return {
    plato: platoValue.toFixed(4),
    gravity: gravityValue.toFixed(3)
  };
}

function applyInputMask(inputType, inputValue) {
  // Remove caracteres n√£o num√©ricos exceto ponto
  let cleaned = inputValue.replace(/[^0-9.]/g, '');
  
  // Garantir apenas um ponto decimal
  const parts = cleaned.split('.');
  if (parts.length > 2) {
    cleaned = parts[0] + '.' + parts.slice(1).join('');
  }
  
  // Aplicar m√°scaras espec√≠ficas
  if (inputType === 'plato') {
    // M√°scara XX.XXXX para Plato/BRIX
    if (cleaned.length === 0) {
      return cleaned;
    }
    
    // Se n√£o tem ponto e tem mais de 2 d√≠gitos, inserir ponto ap√≥s os 2 primeiros
    if (!cleaned.includes('.')) {
      if (cleaned.length > 2) {
        cleaned = cleaned.substring(0, 2) + '.' + cleaned.substring(2);
      }
    }
    
    // Reprocessar as partes ap√≥s inserir o ponto
    const newParts = cleaned.split('.');
    
    // Limitar a parte inteira a 2 d√≠gitos
    if (newParts[0].length > 2) {
      newParts[0] = newParts[0].substring(0, 2);
    }
    
    // Limitar casas decimais a 4
    if (newParts[1] && newParts[1].length > 4) {
      newParts[1] = newParts[1].substring(0, 4);
    }
    
    cleaned = newParts[0] + (newParts[1] !== undefined ? '.' + newParts[1] : '');
  } else {
    // M√°scara 1.XXX para Gravity (for√ßa valores como 1.050)
    if (cleaned.length === 0) {
      return cleaned;
    }
    
    // Se n√£o tem ponto, inserir ap√≥s o primeiro d√≠gito
    if (!cleaned.includes('.')) {
      if (cleaned.length === 1) {
        // Se s√≥ tem 1 d√≠gito, deixar como est√°
        cleaned = cleaned;
      } else {
        // Se tem mais de 1 d√≠gito, inserir ponto ap√≥s o primeiro
        cleaned = cleaned.charAt(0) + '.' + cleaned.substring(1);
      }
    }
    
    // Reprocessar as partes ap√≥s inserir o ponto
    const newParts = cleaned.split('.');
    
    // For√ßar o primeiro d√≠gito a ser 1
    if (newParts[0] !== '1' && newParts[0].length > 0) {
      newParts[0] = '1';
    }
    
    // Limitar casas decimais a 3
    if (newParts[1] && newParts[1].length > 3) {
      newParts[1] = newParts[1].substring(0, 3);
    }
    
    cleaned = newParts[0] + (newParts[1] !== undefined ? '.' + newParts[1] : '');
  }
  
  return cleaned;
}

function updateConverter() {
  const inputType = document.getElementById('inputType').value;
  const inputValue = document.getElementById('inputValue').value;
  
  // Aplicar convers√µes
  const results = convertValues(inputType, inputValue);
  
  // Atualizar resultados
  document.getElementById('platoResult').textContent = results.plato;
  document.getElementById('gravityResult').textContent = results.gravity;
  
  // Atualizar placeholder baseado no tipo
  const inputField = document.getElementById('inputValue');
  if (inputType === 'plato') {
    inputField.placeholder = '00.0000';
  } else {
    inputField.placeholder = '0.000';
  }
}

/* listeners */
leftSel.addEventListener('change', update);
rightSel.addEventListener('change', update);

// Yeast listeners
leftSelYeast.addEventListener('change', updateYeast);
rightSelYeast.addEventListener('change', updateYeast);
// Converter listeners
document.getElementById('inputType').addEventListener('change', function() {
  updateConverter();
  // Limpar input quando trocar o tipo
  document.getElementById('inputValue').value = '';
});
document.getElementById('inputValue').addEventListener('input', function(e) {
  const inputType = document.getElementById('inputType').value;
  const masked = applyInputMask(inputType, e.target.value);
  e.target.value = masked;
  updateConverter();
});

/* =====================  CALCULADORA ABV  ===================== */
function platoToGravity(plato) {
  // More accurate Plato to Gravity conversion
  return 1 + (plato / (258.6 - ((plato / 258.2) * 227.1)));
}

function gravityToPlato(gravity) {
  // More accurate Gravity to Plato conversion  
  return (-1 * 616.868) + (1111.14 * gravity) - (630.272 * gravity * gravity) + (135.997 * gravity * gravity * gravity);
}

function correctRefractometerReading(ogGravity, fgRefractometerGravity) {
  // Corre√ß√£o para leitura de refrat√¥metro na presen√ßa de √°lcool
  // F√≥rmula ajustada para brewing caseiro
  // Esta f√≥rmula considera que o refrat√¥metro l√™ incorretamente devido ao √°lcool
  
  // Converter para pontos de gravidade (gravity points)
  const ogPoints = (ogGravity - 1) * 1000;
  const fgRefractPoints = (fgRefractometerGravity - 1) * 1000;
  
  // Aplicar corre√ß√£o emp√≠rica ajustada
  // F√≥rmula ajustada para exemplo: OG 1.042, FG refract 1.019 ‚Üí real FG 1.005
  const correctedPoints = (0.78 * fgRefractPoints) - (0.30 * ogPoints) + 1.4;
  const correctedFG = 1 + (correctedPoints / 1000);
  
  return Math.max(0.990, Math.min(1.020, correctedFG)); // Limitar FG entre valores realistas
}

function calculateABV(og, fg, correctionFactor = 1.04) {
  let ogGravity = og;
  let fgGravity = fg;
  
  // ABV calculation: (OG - FG) * 134
  const abv = (ogGravity - fgGravity) * 134;
  
  // ABW calculation: ABV * 0.789 (conversion factor from volume to weight)
  const abw = abv * 0.789;
  
  return {
    abv: Math.max(0, abv).toFixed(2),
    abw: Math.max(0, abw).toFixed(2),
    fgGravity: fgGravity,
    fgPlato: gravityToPlato(fgGravity)
  };
}

function updateABVPlaceholders() {
  const ogType = document.getElementById('ogType').value;
  const fgType = document.getElementById('fgType').value;
  
  // Update OG placeholder
  const ogInput = document.getElementById('ogValue');
  ogInput.placeholder = ogType === 'gravity' ? '1.050' : '12.5';
  
  // Update FG placeholder
  const fgInput = document.getElementById('fgValue');
  fgInput.placeholder = fgType === 'gravity' ? '1.010' : '2.5';
}

function updateABVCalculator() {
  const ogType = document.getElementById('ogType').value;
  const ogValue = parseFloat(document.getElementById('ogValue').value);
  const fgMethod = document.getElementById('fgMethod').value;
  const fgType = document.getElementById('fgType').value; 
  const fgValue = parseFloat(document.getElementById('fgValue').value);
  const correctionFactor = parseFloat(document.getElementById('correctionFactor').value) || 1.04;
  
  if (isNaN(ogValue) || isNaN(fgValue) || ogValue <= 0 || fgValue <= 0) {
    // Clear all results
    document.getElementById('densityGravityResult').textContent = '‚Äî';
    document.getElementById('densityPlatoResult').textContent = '‚Äî';
    document.getElementById('abvResult').textContent = '‚Äî';
    document.getElementById('abwResult').textContent = '‚Äî';
    return;
  }
  
  // Convert OG to gravity format
  let ogGravity = ogType === 'plato' ? platoToGravity(ogValue) : ogValue;
  let ogPlato = ogType === 'gravity' ? gravityToPlato(ogValue) : ogValue;
  
  // Handle FG based on measurement method
  let fgGravity;
  
  if (fgMethod === 'refractometer') {
    // Apply refractometer correction
    let fgRefractometerGravity = fgType === 'plato' ? platoToGravity(fgValue) : fgValue;
    fgGravity = correctRefractometerReading(ogGravity, fgRefractometerGravity);
  } else {
    // Direct hydrometer reading
    fgGravity = fgType === 'plato' ? platoToGravity(fgValue) : fgValue;
  }
  
  // Calculate ABV, ABW and get FG conversions
  const results = calculateABV(ogGravity, fgGravity, correctionFactor);
  
  // Display results - only final gravity (FG) conversions (corrected values)
  document.getElementById('densityGravityResult').textContent = results.fgGravity.toFixed(3);
  document.getElementById('densityPlatoResult').textContent = results.fgPlato.toFixed(4);
  document.getElementById('abvResult').textContent = results.abv + '%';
  document.getElementById('abwResult').textContent = results.abw + '%';
}

/* ===================== COLOR CONVERSION FUNCTIONS ===================== */

// Color conversion functions
function srmToEbc(srm) {
  return srm * 1.97;
}

function ebcToSrm(ebc) {
  return ebc / 1.97;
}

function lovibondToSrm(lovibond) {
  return (lovibond * 1.35) - 0.6;
}

function srmToLovibond(srm) {
  return (srm + 0.6) / 1.35;
}

// Convert SRM to RGB color approximation
function srmToRgb(srm) {
  // Clamp SRM values to reasonable range
  srm = Math.max(0, Math.min(srm, 40));
  
  // SRM to RGB mapping from brewing wiki (accurate colors)
  const colorMap = [
    { srm: 1, r: 0xF3, g: 0xF9, b: 0x93 },   // #F3F993
    { srm: 2, r: 0xF5, g: 0xF7, b: 0x5C },   // #F5F75C
    { srm: 3, r: 0xF6, g: 0xF5, b: 0x13 },   // #F6F513
    { srm: 4, r: 0xEA, g: 0xE6, b: 0x15 },   // #EAE615
    { srm: 5, r: 0xE0, g: 0xD0, b: 0x1B },   // #E0D01B
    { srm: 6, r: 0xD5, g: 0xBC, b: 0x26 },   // #D5BC26
    { srm: 7, r: 0xCD, g: 0xAA, b: 0x37 },   // #CDAA37
    { srm: 8, r: 0xC1, g: 0x96, b: 0x3C },   // #C1963C
    { srm: 9, r: 0xBE, g: 0x8C, b: 0x3A },   // #BE8C3A
    { srm: 10, r: 0xBE, g: 0x82, b: 0x3A },  // #BE823A
    { srm: 11, r: 0xC1, g: 0x7A, b: 0x37 },  // #C17A37
    { srm: 12, r: 0xBF, g: 0x71, b: 0x38 },  // #BF7138
    { srm: 13, r: 0xBC, g: 0x67, b: 0x33 },  // #BC6733
    { srm: 14, r: 0xB2, g: 0x60, b: 0x33 },  // #B26033
    { srm: 15, r: 0xA8, g: 0x58, b: 0x39 },  // #A85839
    { srm: 16, r: 0x98, g: 0x53, b: 0x36 },  // #985336
    { srm: 17, r: 0x8D, g: 0x4C, b: 0x32 },  // #8D4C32
    { srm: 18, r: 0x7C, g: 0x45, b: 0x2D },  // #7C452D
    { srm: 19, r: 0x6B, g: 0x3A, b: 0x1E },  // #6B3A1E
    { srm: 20, r: 0x5D, g: 0x34, b: 0x1A },  // #5D341A
    { srm: 21, r: 0x4E, g: 0x2A, b: 0x0C },  // #4E2A0C
    { srm: 22, r: 0x4A, g: 0x27, b: 0x27 },  // #4A2727
    { srm: 23, r: 0x36, g: 0x1F, b: 0x1B },  // #361F1B
    { srm: 24, r: 0x26, g: 0x17, b: 0x16 },  // #261716
    { srm: 25, r: 0x23, g: 0x17, b: 0x16 },  // #231716
    { srm: 26, r: 0x19, g: 0x10, b: 0x0F },  // #19100F
    { srm: 27, r: 0x16, g: 0x10, b: 0x0F },  // #16100F
    { srm: 28, r: 0x12, g: 0x0D, b: 0x0C },  // #120D0C
    { srm: 29, r: 0x10, g: 0x0B, b: 0x0A },  // #100B0A
    { srm: 30, r: 0x05, g: 0x0B, b: 0x0A },  // #050B0A
    { srm: 31, r: 0x04, g: 0x0A, b: 0x09 },  // Interpolated
    { srm: 32, r: 0x04, g: 0x09, b: 0x08 },  // Interpolated
    { srm: 33, r: 0x03, g: 0x08, b: 0x07 },  // Interpolated
    { srm: 34, r: 0x03, g: 0x07, b: 0x06 },  // Interpolated
    { srm: 35, r: 0x02, g: 0x06, b: 0x05 },  // Interpolated
    { srm: 36, r: 0x02, g: 0x05, b: 0x04 },  // Interpolated
    { srm: 37, r: 0x01, g: 0x04, b: 0x03 },  // Interpolated
    { srm: 38, r: 0x01, g: 0x03, b: 0x02 },  // Interpolated
    { srm: 39, r: 0x01, g: 0x02, b: 0x01 },  // Interpolated
    { srm: 40, r: 0x00, g: 0x00, b: 0x00 }   // #000000 - Black
  ];
  
  // Find the two closest SRM values in the color map
  let lower = colorMap[0];
  let upper = colorMap[colorMap.length - 1];
  
  for (let i = 0; i < colorMap.length - 1; i++) {
    if (srm >= colorMap[i].srm && srm <= colorMap[i + 1].srm) {
      lower = colorMap[i];
      upper = colorMap[i + 1];
      break;
    }
  }
  
  // Interpolate between the two colors
  const ratio = (srm - lower.srm) / (upper.srm - lower.srm);
  const r = Math.round(lower.r + ratio * (upper.r - lower.r));
  const g = Math.round(lower.g + ratio * (upper.g - lower.g));
  const b = Math.round(lower.b + ratio * (upper.b - lower.b));
  
  return { r, g, b };
}

function updateColorConverter() {
  const inputType = document.getElementById('colorInputType').value;
  const inputValue = parseFloat(document.getElementById('colorInputValue').value);
  
  if (isNaN(inputValue) || inputValue < 0) {
    // Clear all results
    document.getElementById('lovibondResult').textContent = '‚Äî';
    document.getElementById('srmResult').textContent = '‚Äî';
    document.getElementById('ebcResult').textContent = '‚Äî';
    document.getElementById('lovibondColorBox').style.backgroundColor = '#0f1530';
    document.getElementById('srmColorBox').style.backgroundColor = '#0f1530';
    document.getElementById('ebcColorBox').style.backgroundColor = '#0f1530';
    return;
  }
  
  let srmValue, lovibondValue, ebcValue;
  
  // Convert input to SRM first (base conversion)
  switch (inputType) {
    case 'srm':
      srmValue = inputValue;
      break;
    case 'lovibond':
      srmValue = lovibondToSrm(inputValue);
      break;
    case 'ebc':
      srmValue = ebcToSrm(inputValue);
      break;
  }
  
  // Convert SRM to other scales
  lovibondValue = srmToLovibond(srmValue);
  ebcValue = srmToEbc(srmValue);
  
  // Display results
  document.getElementById('lovibondResult').textContent = lovibondValue.toFixed(2);
  document.getElementById('srmResult').textContent = srmValue.toFixed(2);
  document.getElementById('ebcResult').textContent = ebcValue.toFixed(2);
  
  // Update color displays
  const rgb = srmToRgb(srmValue);
  const colorString = `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;
  
  // All color boxes show the same color since they all represent the same beer
  document.getElementById('lovibondColorBox').style.backgroundColor = colorString;
  document.getElementById('srmColorBox').style.backgroundColor = colorString;
  document.getElementById('ebcColorBox').style.backgroundColor = colorString;
  
  // Update beer glass color
  const transparencySliderValue = parseInt(document.getElementById('beerTransparency').value);
  const actualOpacity = 0.8 + (transparencySliderValue / 100) * 0.2; // Map 0-100% to 0.8-1.0
  updateBeerGlass(rgb, actualOpacity);
  
  // Update ruler indicator position
  updateColorRulerIndicator(srmValue);
}

function initializeColorRuler() {
  const ruler = document.getElementById('colorRuler');
  const gradientStops = [];
  
  // Create gradient stops for each SRM value
  for (let srm = 1; srm <= 40; srm++) {
    const rgb = srmToRgb(srm);
    const percentage = ((srm - 1) / 39) * 100; // 0% at SRM 1, 100% at SRM 40
    gradientStops.push(`rgb(${rgb.r}, ${rgb.g}, ${rgb.b}) ${percentage}%`);
  }
  
  ruler.style.background = `linear-gradient(to right, ${gradientStops.join(', ')})`;
}

function updateColorRulerIndicator(srmValue) {
  const indicator = document.getElementById('colorRulerIndicator');
  
  if (isNaN(srmValue) || srmValue < 1) {
    indicator.style.opacity = '0';
    return;
  }
  
  // Calculate position as percentage (0% at SRM 1, 100% at SRM 40)
  const percentage = Math.min(100, Math.max(0, ((srmValue - 1) / 39) * 100));
  
  indicator.style.left = `${percentage}%`;
  indicator.style.opacity = '1';
}

function updateBeerGlass(rgb, opacity) {
  const beerLiquid = document.getElementById('beerLiquid');
  if (!beerLiquid) return;
  
  const colorString = `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;
  beerLiquid.style.fill = colorString;
  beerLiquid.style.opacity = opacity;
}

function updateTransparencyDisplay() {
  const transparencySlider = document.getElementById('beerTransparency');
  const transparencyValue = document.getElementById('transparencyValue');
  const sliderValue = parseInt(transparencySlider.value);
  transparencyValue.textContent = `${sliderValue}%`;
  
  // Update beer glass if we have a color selected
  const colorInputValue = document.getElementById('colorInputValue').value;
  if (colorInputValue && !isNaN(parseFloat(colorInputValue))) {
    updateColorConverter();
  }
}

// Event listeners para ABV calculator
document.getElementById('ogType').addEventListener('change', function() {
  updateABVPlaceholders();
  updateABVCalculator();
  // Limpar input quando trocar o tipo
  document.getElementById('ogValue').value = '';
});

document.getElementById('ogValue').addEventListener('input', function(e) {
  const ogType = document.getElementById('ogType').value;
  const masked = applyInputMask(ogType, e.target.value);
  e.target.value = masked;
  updateABVCalculator();
});

document.getElementById('fgMethod').addEventListener('change', function() {
  updateABVCalculator();
});

document.getElementById('fgType').addEventListener('change', function() {
  updateABVPlaceholders();
  updateABVCalculator();
  // Limpar input quando trocar o tipo
  document.getElementById('fgValue').value = '';
});

document.getElementById('fgValue').addEventListener('input', function(e) {
  const fgType = document.getElementById('fgType').value;
  const masked = applyInputMask(fgType, e.target.value);
  e.target.value = masked;
  updateABVCalculator();
});

document.getElementById('correctionFactor').addEventListener('input', function(e) {
  // Aplicar m√°scara para o fator de corre√ß√£o (X.XX)
  let cleaned = e.target.value.replace(/[^0-9.]/g, '');
  const parts = cleaned.split('.');
  if (parts.length > 2) {
    cleaned = parts[0] + '.' + parts.slice(1).join('');
  }
  if (parts[0].length > 1) {
    cleaned = cleaned.substring(0, 1) + (parts[1] ? '.' + parts[1].substring(0, 2) : '');
  } else if (parts[1] && parts[1].length > 2) {
    cleaned = parts[0] + '.' + parts[1].substring(0, 2);
  }
  e.target.value = cleaned;
  updateABVCalculator();
});

// Event listeners para Color Converter
document.getElementById('colorInputType').addEventListener('change', function() {
  updateColorConverter();
});

document.getElementById('colorInputValue').addEventListener('input', function(e) {
  // Allow only numbers and decimal point
  let cleaned = e.target.value.replace(/[^0-9.]/g, '');
  const parts = cleaned.split('.');
  if (parts.length > 2) {
    cleaned = parts[0] + '.' + parts.slice(1).join('');
  }
  if (parts[1] && parts[1].length > 2) {
    cleaned = parts[0] + '.' + parts[1].substring(0, 2);
  }
  e.target.value = cleaned;
  updateColorConverter();
});

document.getElementById('beerTransparency').addEventListener('input', function() {
  updateTransparencyDisplay();
});

// Menu switching
document.querySelectorAll('.menu-btn').forEach(btn => {
  btn.addEventListener('click', () => switchTool(btn.dataset.tool));
});

// Tab switching for hop tool
document.querySelectorAll('#hop-tool .tab-btn').forEach(btn => {
  btn.addEventListener('click', () => switchTab(btn.dataset.tab));
});

// Tab switching for yeast tool
document.querySelectorAll('#yeast-tool .tab-btn').forEach(btn => {
  btn.addEventListener('click', () => switchYeastTab(btn.dataset.tab));
});

// Language switching
document.querySelectorAll('.lang-btn').forEach(btn => {
  btn.addEventListener('click', () => switchLanguage(btn.dataset.lang));
});

/* inicializa√ß√£o */
// Aguarda o DOM estar pronto
document.addEventListener('DOMContentLoaded', function() {
  // Configura idioma inicial
  switchLanguage(currentLang);

  // Inicializa listas de op√ß√µes
  fillSelects(DATA);
  fillYeastSelects(YEAST_DATA);

  // Configura ferramenta inicial (hop)
  switchTool('hop');
  // Initialize color ruler
  initializeColorRuler();
  
  // Inicializa placeholders da calculadora ABV
  updateABVPlaceholders();

  /* pr√©-sele√ß√µes simp√°ticas para hops */
  const defaultLeft = byName.has('Cascade') ? 'Cascade' : DATA[0].nome;
  const defaultRight = byName.has('Citra') ? 'Citra' : (DATA[1]?.nome ?? '');
  leftSel.value = defaultLeft;
  rightSel.value = defaultRight;
  update();

  /* pr√©-sele√ß√µes simp√°ticas para yeasts */
  const defaultLeftYeast = yeastByName.has('Safale US-05') ? 'Safale US-05' : YEAST_DATA[0].nome;
  const defaultRightYeast = yeastByName.has('Wyeast 1968 London ESB') ? 'Wyeast 1968 London ESB' : (YEAST_DATA[1]?.nome ?? '');
  leftSelYeast.value = defaultLeftYeast;
  rightSelYeast.value = defaultRightYeast;
  updateYeast();
});
</script>
</body>
</html>
